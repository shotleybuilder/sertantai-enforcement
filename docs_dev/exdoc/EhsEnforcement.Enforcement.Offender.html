<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="generator" content="ExDoc v0.38.2">
    <meta name="project" content="ehs_enforcement v0.1.0">


    <title>EhsEnforcement.Enforcement.Offender â€” ehs_enforcement v0.1.0</title>

    <link rel="stylesheet" href="dist/html-elixir-KV3YOVJ3.css" />

    <script defer src="dist/sidebar_items-E067AF28.js"></script>
    <script defer src="docs_config.js"></script>
    <script defer src="dist/html-DPJLHKSM.js"></script>

  </head>
  <body>
    <script>(()=>{var t="ex_doc:settings",e="dark";var o="dark",s="light";var E="sidebar_state",n="closed";var r="sidebar_width";var a="sidebar-open";var i=new URLSearchParams(window.location.search),S=i.get("theme")||JSON.parse(localStorage.getItem(t)||"{}").theme;(S===o||S!==s&&window.matchMedia("(prefers-color-scheme: dark)").matches)&&document.body.classList.add(e);var d=sessionStorage.getItem(E),A=d!==n&&!window.matchMedia(`screen and (max-width: ${768}px)`).matches;document.body.classList.toggle(a,A);var c=sessionStorage.getItem(r);c&&document.body.style.setProperty("--sidebarWidth",`${c}px`);var p=/(Macintosh|iPhone|iPad|iPod)/.test(window.navigator.userAgent);document.documentElement.classList.toggle("apple-os",p);})();
</script>

<div class="body-wrapper">

<button id="sidebar-menu" class="sidebar-button sidebar-toggle" aria-label="toggle sidebar" aria-controls="sidebar">
  <i class="ri-menu-line ri-lg" title="Collapse/expand sidebar"></i>
</button>

<nav id="sidebar" class="sidebar">

  <div class="sidebar-header">
    <div class="sidebar-projectInfo">

      <div>
        <a href="EhsEnforcement.html" class="sidebar-projectName" translate="no">
ehs_enforcement
        </a>
        <div class="sidebar-projectVersion" translate="no">
          v0.1.0
        </div>
      </div>
    </div>
    <ul id="sidebar-list-nav" class="sidebar-list-nav" role="tablist" data-extras=""></ul>
  </div>
</nav>

<output role="status" id="toast"></output>

<main class="content page-module" id="main" data-type="modules">
  <div id="content" class="content-inner">
    <div class="top-search">
      <div class="search-settings">
        <form class="search-bar" action="search.html">
          <label class="search-label">
            <span class="sr-only">Search documentation of ehs_enforcement</span>
            <input name="q" type="text" class="search-input" placeholder="Press / to search" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" />
          </label>
          <button type="submit" class="search-button" aria-label="Submit Search" tabindex="-1">
            <i class="ri-search-2-line ri-lg" aria-hidden="true"></i>
          </button>
          <button type="button" tabindex="-1" class="search-close-button" aria-hidden="true">
            <i class="ri-close-line ri-lg" title="Cancel search"></i>
          </button>
        </form>
        <div class="autocomplete">
        </div>
        <button class="icon-settings display-settings">
          <i class="ri-settings-3-line"></i>
          <span class="sr-only">Settings</span>
        </button>
      </div>
    </div>

<div id="top-content">
  <div class="heading-with-actions top-heading">
    <h1>
      <span translate="no">EhsEnforcement.Enforcement.Offender</span> 
      <small class="app-vsn" translate="no">(ehs_enforcement v0.1.0)</small>

    </h1>

  </div>


    <section id="moduledoc">
<p>Represents a company or individual subject to enforcement action.
Normalized to eliminate duplication between cases and notices.</p>
    </section>

</div>

  <section id="summary" class="details-list">
    <h1 class="section-heading">
      <a class="hover-link" href="#summary">
        <i class="ri-link-m" aria-hidden="true"></i>
      </a>
      <span class="text">Summary</span>
    </h1>
<div class="summary-types summary">
  <h2>
    <a href="#types">Types</a>
  </h2>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#t:t/0" data-no-tooltip="" translate="no">t()</a>

      </div>

    </div>

</div>
<div class="summary-functions summary">
  <h2>
    <a href="#functions">Functions</a>
  </h2>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#can_create/4" data-no-tooltip="" translate="no">can_create(actor, name, params_or_opts \\ %{}, opts \\ [])</a>

      </div>

        <div class="summary-synopsis"><p>Runs authorization checks for <code class="inline">EhsEnforcement.Enforcement.Offender.create</code>
See <a><code class="inline">Ash.can/3</code></a> for more information</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#can_create?/4" data-no-tooltip="" translate="no">can_create?(actor, name, params_or_opts \\ %{}, opts \\ [])</a>

      </div>

        <div class="summary-synopsis"><p>Runs authorization checks for <code class="inline">EhsEnforcement.Enforcement.Offender.create</code>, returning a boolean.
See <a><code class="inline">Ash.can?/3</code></a> for more information</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#can_search/4" data-no-tooltip="" translate="no">can_search(actor, query, params_or_opts \\ %{}, opts \\ [])</a>

      </div>

        <div class="summary-synopsis"><p>Runs authorization checks for <code class="inline">EhsEnforcement.Enforcement.Offender.search</code>
See <a><code class="inline">Ash.can/3</code></a> for more information</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#can_search?/4" data-no-tooltip="" translate="no">can_search?(actor, query, params_or_opts \\ %{}, opts \\ [])</a>

      </div>

        <div class="summary-synopsis"><p>Runs authorization checks for <code class="inline">EhsEnforcement.Enforcement.Offender.search</code>, returning a boolean.
See <a><code class="inline">Ash.can?/3</code></a> for more information</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#can_update_statistics/4" data-no-tooltip="" translate="no">can_update_statistics(actor, record, params_or_opts \\ %{}, opts \\ [])</a>

      </div>

        <div class="summary-synopsis"><p>Runs authorization checks for <code class="inline">EhsEnforcement.Enforcement.Offender.update_statistics</code>
See <a><code class="inline">Ash.can/3</code></a> for more information</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#can_update_statistics?/4" data-no-tooltip="" translate="no">can_update_statistics?(actor, record, params_or_opts \\ %{}, opts \\ [])</a>

      </div>

        <div class="summary-synopsis"><p>Runs authorization checks for <code class="inline">EhsEnforcement.Enforcement.Offender.update_statistics</code>, returning a boolean.
See <a><code class="inline">Ash.can?/3</code></a> for more information</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#changeset_to_create/3" data-no-tooltip="" translate="no">changeset_to_create(name, params_or_opts \\ %{}, opts \\ [])</a>

      </div>

        <div class="summary-synopsis"><p>Returns the changeset corresponding to the action.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#changeset_to_update_statistics/3" data-no-tooltip="" translate="no">changeset_to_update_statistics(record, params_or_opts \\ %{}, opts \\ [])</a>

      </div>

        <div class="summary-synopsis"><p>Returns the changeset corresponding to the action.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#create/3" data-no-tooltip="" translate="no">create(name, params \\ nil, opts \\ nil)</a>

      </div>

        <div class="summary-synopsis"><p>Calls the create action on EhsEnforcement.Enforcement.Offender.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#create!/3" data-no-tooltip="" translate="no">create!(name, params \\ nil, opts \\ nil)</a>

      </div>

        <div class="summary-synopsis"><p>Calls the create action on EhsEnforcement.Enforcement.Offender.
Raises any errors instead of returning them</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#default_short_name/0" data-no-tooltip="" translate="no">default_short_name()</a>

      </div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#find_or_create_offender/1" data-no-tooltip="" translate="no">find_or_create_offender(attrs)</a>

      </div>

        <div class="summary-synopsis"><p>Finds or creates an offender with deduplication logic.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#input/1" data-no-tooltip="" translate="no">input(opts)</a>

      </div>

        <div class="summary-synopsis"><p>Validates that the keys in the provided input are valid for at least one action on the resource.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#input/2" data-no-tooltip="" translate="no">input(opts, action)</a>

      </div>

        <div class="summary-synopsis"><p>Same as <a><code class="inline">input/1</code></a>, except restricts the keys to values accepted by the action provided.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#normalize_company_name/1" data-no-tooltip="" translate="no">normalize_company_name(name)</a>

      </div>

        <div class="summary-synopsis"><p>Normalize company names to standard format for matching.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#primary_key_matches?/2" data-no-tooltip="" translate="no">primary_key_matches?(left, right)</a>

      </div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#query_to_search/3" data-no-tooltip="" translate="no">query_to_search(query, params_or_opts \\ %{}, opts \\ [])</a>

      </div>

        <div class="summary-synopsis"><p>Returns the query corresponding to the action.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#search/3" data-no-tooltip="" translate="no">search(query, params \\ nil, opts \\ nil)</a>

      </div>

        <div class="summary-synopsis"><p>Calls the search action on EhsEnforcement.Enforcement.Offender.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#search!/3" data-no-tooltip="" translate="no">search!(query, params \\ nil, opts \\ nil)</a>

      </div>

        <div class="summary-synopsis"><p>Calls the search action on EhsEnforcement.Enforcement.Offender.
Raises any errors instead of returning them</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#update_statistics/3" data-no-tooltip="" translate="no">update_statistics(record, params \\ nil, opts \\ nil)</a>

      </div>

        <div class="summary-synopsis"><p>Calls the update_statistics action on EhsEnforcement.Enforcement.Offender.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#update_statistics!/3" data-no-tooltip="" translate="no">update_statistics!(record, params \\ nil, opts \\ nil)</a>

      </div>

        <div class="summary-synopsis"><p>Calls the update_statistics action on EhsEnforcement.Enforcement.Offender.
Raises any errors instead of returning them</p></div>

    </div>

</div>

  </section>


  <section id="types" class="details-list">
    <h1 class="section-heading">
      <a class="hover-link" href="#types">
        <i class="ri-link-m" aria-hidden="true"></i>
      </a>
      <span class="text">Types</span>
    </h1>
    <div class="types-list">
<section class="detail" id="t:t/0">

  <div class="detail-header">
    <a href="#t:t/0" class="detail-link" data-no-tooltip="" aria-label="Link to this type">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">t()</h1>


    </div>
  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">@type</span> t() :: %EhsEnforcement.Enforcement.Offender{
  __lateral_join_source__: <a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types">term</a>(),
  __meta__: <a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types">term</a>(),
  __metadata__: <a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types">term</a>(),
  __order__: <a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types">term</a>(),
  address: <a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types">term</a>(),
  agencies: <a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types">term</a>(),
  aggregates: <a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types">term</a>(),
  business_type: <a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types">term</a>(),
  calculations: <a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types">term</a>(),
  cases: <a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types">term</a>(),
  company_registration_number: <a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types">term</a>(),
  country: <a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types">term</a>(),
  county: <a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types">term</a>(),
  enforcement_count: <a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types">term</a>(),
  first_seen_date: <a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types">term</a>(),
  id: <a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types">term</a>(),
  industry: <a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types">term</a>(),
  industry_sectors: <a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types">term</a>(),
  inserted_at: <a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types">term</a>(),
  last_seen_date: <a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types">term</a>(),
  local_authority: <a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types">term</a>(),
  main_activity: <a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types">term</a>(),
  name: <a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types">term</a>(),
  normalized_name: <a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types">term</a>(),
  notices: <a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types">term</a>(),
  postcode: <a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types">term</a>(),
  sic_code: <a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types">term</a>(),
  total_cases: <a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types">term</a>(),
  total_fines: <a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types">term</a>(),
  total_notices: <a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types">term</a>(),
  town: <a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types">term</a>(),
  updated_at: <a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types">term</a>()
}</pre>

      </div>


  </section>
</section>

    </div>
  </section>

  <section id="functions" class="details-list">
    <h1 class="section-heading">
      <a class="hover-link" href="#functions">
        <i class="ri-link-m" aria-hidden="true"></i>
      </a>
      <span class="text">Functions</span>
    </h1>
    <div class="functions-list">
<section class="detail" id="can_create/4">

    <span id="can_create/2"></span>

    <span id="can_create/3"></span>

  <div class="detail-header">
    <a href="#can_create/4" class="detail-link" data-no-tooltip="" aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">can_create(actor, name, params_or_opts \\ %{}, opts \\ [])</h1>


    </div>
  </div>

  <section class="docstring">

<p>Runs authorization checks for <code class="inline">EhsEnforcement.Enforcement.Offender.create</code>
See <a href="https://hexdocs.pm/ash/3.7.6/Ash.html#can/3"><code class="inline">Ash.can/3</code></a> for more information</p><h2 id="can_create/4-options" class="section-heading"><a href="#can_create/4-options" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Options</span></h2><ul><li><code class="inline">:maybe_is</code> (<a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types"><code class="inline">term/0</code></a>) - If the actor <em>may</em> be able to perform the action, what value should be returned. The default value is <code class="inline">:maybe</code>.</li><li><code class="inline">:filter_with</code> - If set to <code class="inline">:error</code>, the query will raise an error on a match. If set to <code class="inline">:filter</code> the query will filter out unauthorized access. Valid values are :filter, :error The default value is <code class="inline">:filter</code>.</li><li><code class="inline">:validate?</code> (<a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types"><code class="inline">boolean/0</code></a>) - Whether or not to treat an invalid action as a non-allowed action. The default value is <code class="inline">false</code>.</li><li><code class="inline">:reuse_values?</code> (<a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types"><code class="inline">boolean/0</code></a>) - Whether or not loaded data like aggregates, calculations and relationships should be checked in memory if possible, instead of querying. No effect if <code class="inline">pre_flight?</code> is <code class="inline">false</code>. The default value is <code class="inline">false</code>.</li><li><code class="inline">:pre_flight?</code> (<a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types"><code class="inline">boolean/0</code></a>) - Whether or not this is a pre_flight check (which may perform optimized in-memory checks) or the final proper check. The default value is <code class="inline">true</code>.</li><li><code class="inline">:scope</code> (<a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types"><code class="inline">term/0</code></a>) - A value that implements the <a href="https://hexdocs.pm/ash/3.7.6/Ash.Scope.ToOpts.html"><code class="inline">Ash.Scope.ToOpts</code></a> protocol. Will overwrite any actor, tenant or context provided. See <a href="https://hexdocs.pm/ash/3.7.6/Ash.Context.html"><code class="inline">Ash.Context</code></a> for more.</li><li><code class="inline">:run_queries?</code> (<a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types"><code class="inline">boolean/0</code></a>) - Whether or not to run queries. If set to <code class="inline">true</code>, <code class="inline">:maybe</code> will not be returned. The default value is <code class="inline">true</code>.</li><li><code class="inline">:data</code> - The record or records specifically attempting to be acted upon.</li><li><code class="inline">:tenant</code> (value that implements the <a href="https://hexdocs.pm/ash/3.7.6/Ash.ToTenant.html"><code class="inline">Ash.ToTenant</code></a> protocol) - The tenant to use for authorization</li><li><code class="inline">:alter_source?</code> (<a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types"><code class="inline">boolean/0</code></a>) - If set to <code class="inline">true</code>, the source being authorized is returned so it can be run. The default value is <code class="inline">false</code>.</li><li><code class="inline">:base_query</code> (<a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types"><code class="inline">term/0</code></a>) - A base query on which to apply an generated filters</li><li><code class="inline">:no_check?</code> (<a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types"><code class="inline">boolean/0</code></a>) - Whether or not authorization must pass at the strict/filter step, or if post-checks are allowed to be run The default value is <code class="inline">false</code>.</li><li><code class="inline">:on_must_pass_strict_check</code> (<a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types"><code class="inline">term/0</code></a>) - Override the value returned when <code class="inline">no_check?</code> is <code class="inline">true</code> but a check must be run.</li><li><code class="inline">:atomic_changeset</code> (<a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types"><code class="inline">term/0</code></a>) - A base query on which to apply an generated filters</li><li><code class="inline">:return_forbidden_error?</code> (<a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types"><code class="inline">boolean/0</code></a>) - Whether or not to return a forbidden error in cases of not being authorized. The default value is <code class="inline">false</code>.</li><li><code class="inline">:log?</code> (<a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types"><code class="inline">boolean/0</code></a>) - Whether or not to log the authorization result. The default value is <code class="inline">false</code>.</li></ul>
  </section>
</section>
<section class="detail" id="can_create?/4">

    <span id="can_create?/2"></span>

    <span id="can_create?/3"></span>

  <div class="detail-header">
    <a href="#can_create?/4" class="detail-link" data-no-tooltip="" aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">can_create?(actor, name, params_or_opts \\ %{}, opts \\ [])</h1>


    </div>
  </div>

  <section class="docstring">

<p>Runs authorization checks for <code class="inline">EhsEnforcement.Enforcement.Offender.create</code>, returning a boolean.
See <a href="https://hexdocs.pm/ash/3.7.6/Ash.html#can?/3"><code class="inline">Ash.can?/3</code></a> for more information</p><h2 id="can_create?/4-options" class="section-heading"><a href="#can_create?/4-options" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Options</span></h2><ul><li><code class="inline">:maybe_is</code> (<a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types"><code class="inline">term/0</code></a>) - If the actor <em>may</em> be able to perform the action, what value should be returned. The default value is <code class="inline">true</code>.</li><li><code class="inline">:filter_with</code> - If set to <code class="inline">:error</code>, the query will raise an error on a match. If set to <code class="inline">:filter</code> the query will filter out unauthorized access. Valid values are :filter, :error The default value is <code class="inline">:filter</code>.</li><li><code class="inline">:validate?</code> (<a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types"><code class="inline">boolean/0</code></a>) - Whether or not to treat an invalid action as a non-allowed action. The default value is <code class="inline">false</code>.</li><li><code class="inline">:reuse_values?</code> (<a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types"><code class="inline">boolean/0</code></a>) - Whether or not loaded data like aggregates, calculations and relationships should be checked in memory if possible, instead of querying. No effect if <code class="inline">pre_flight?</code> is <code class="inline">false</code>. The default value is <code class="inline">false</code>.</li><li><code class="inline">:pre_flight?</code> (<a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types"><code class="inline">boolean/0</code></a>) - Whether or not this is a pre_flight check (which may perform optimized in-memory checks) or the final proper check. The default value is <code class="inline">true</code>.</li><li><code class="inline">:scope</code> (<a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types"><code class="inline">term/0</code></a>) - A value that implements the <a href="https://hexdocs.pm/ash/3.7.6/Ash.Scope.ToOpts.html"><code class="inline">Ash.Scope.ToOpts</code></a> protocol. Will overwrite any actor, tenant or context provided. See <a href="https://hexdocs.pm/ash/3.7.6/Ash.Context.html"><code class="inline">Ash.Context</code></a> for more.</li><li><code class="inline">:run_queries?</code> (<a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types"><code class="inline">boolean/0</code></a>) - Whether or not to run queries. If set to <code class="inline">true</code>, <code class="inline">:maybe</code> will not be returned. The default value is <code class="inline">true</code>.</li><li><code class="inline">:data</code> - The record or records specifically attempting to be acted upon.</li><li><code class="inline">:tenant</code> (value that implements the <a href="https://hexdocs.pm/ash/3.7.6/Ash.ToTenant.html"><code class="inline">Ash.ToTenant</code></a> protocol) - The tenant to use for authorization</li><li><code class="inline">:alter_source?</code> (<a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types"><code class="inline">boolean/0</code></a>) - If set to <code class="inline">true</code>, the source being authorized is returned so it can be run. The default value is <code class="inline">false</code>.</li><li><code class="inline">:base_query</code> (<a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types"><code class="inline">term/0</code></a>) - A base query on which to apply an generated filters</li><li><code class="inline">:no_check?</code> (<a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types"><code class="inline">boolean/0</code></a>) - Whether or not authorization must pass at the strict/filter step, or if post-checks are allowed to be run The default value is <code class="inline">false</code>.</li><li><code class="inline">:on_must_pass_strict_check</code> (<a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types"><code class="inline">term/0</code></a>) - Override the value returned when <code class="inline">no_check?</code> is <code class="inline">true</code> but a check must be run.</li><li><code class="inline">:atomic_changeset</code> (<a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types"><code class="inline">term/0</code></a>) - A base query on which to apply an generated filters</li><li><code class="inline">:return_forbidden_error?</code> (<a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types"><code class="inline">boolean/0</code></a>) - Whether or not to return a forbidden error in cases of not being authorized. The default value is <code class="inline">false</code>.</li><li><code class="inline">:log?</code> (<a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types"><code class="inline">boolean/0</code></a>) - Whether or not to log the authorization result. The default value is <code class="inline">false</code>.</li></ul>
  </section>
</section>
<section class="detail" id="can_search/4">

    <span id="can_search/2"></span>

    <span id="can_search/3"></span>

  <div class="detail-header">
    <a href="#can_search/4" class="detail-link" data-no-tooltip="" aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">can_search(actor, query, params_or_opts \\ %{}, opts \\ [])</h1>


    </div>
  </div>

  <section class="docstring">

<p>Runs authorization checks for <code class="inline">EhsEnforcement.Enforcement.Offender.search</code>
See <a href="https://hexdocs.pm/ash/3.7.6/Ash.html#can/3"><code class="inline">Ash.can/3</code></a> for more information</p><h2 id="can_search/4-options" class="section-heading"><a href="#can_search/4-options" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Options</span></h2><ul><li><code class="inline">:maybe_is</code> (<a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types"><code class="inline">term/0</code></a>) - If the actor <em>may</em> be able to perform the action, what value should be returned. The default value is <code class="inline">:maybe</code>.</li><li><code class="inline">:filter_with</code> - If set to <code class="inline">:error</code>, the query will raise an error on a match. If set to <code class="inline">:filter</code> the query will filter out unauthorized access. Valid values are :filter, :error The default value is <code class="inline">:filter</code>.</li><li><code class="inline">:validate?</code> (<a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types"><code class="inline">boolean/0</code></a>) - Whether or not to treat an invalid action as a non-allowed action. The default value is <code class="inline">false</code>.</li><li><code class="inline">:reuse_values?</code> (<a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types"><code class="inline">boolean/0</code></a>) - Whether or not loaded data like aggregates, calculations and relationships should be checked in memory if possible, instead of querying. No effect if <code class="inline">pre_flight?</code> is <code class="inline">false</code>. The default value is <code class="inline">false</code>.</li><li><code class="inline">:pre_flight?</code> (<a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types"><code class="inline">boolean/0</code></a>) - Whether or not this is a pre_flight check (which may perform optimized in-memory checks) or the final proper check. The default value is <code class="inline">true</code>.</li><li><code class="inline">:scope</code> (<a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types"><code class="inline">term/0</code></a>) - A value that implements the <a href="https://hexdocs.pm/ash/3.7.6/Ash.Scope.ToOpts.html"><code class="inline">Ash.Scope.ToOpts</code></a> protocol. Will overwrite any actor, tenant or context provided. See <a href="https://hexdocs.pm/ash/3.7.6/Ash.Context.html"><code class="inline">Ash.Context</code></a> for more.</li><li><code class="inline">:run_queries?</code> (<a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types"><code class="inline">boolean/0</code></a>) - Whether or not to run queries. If set to <code class="inline">true</code>, <code class="inline">:maybe</code> will not be returned. The default value is <code class="inline">true</code>.</li><li><code class="inline">:data</code> - The record or records specifically attempting to be acted upon.</li><li><code class="inline">:tenant</code> (value that implements the <a href="https://hexdocs.pm/ash/3.7.6/Ash.ToTenant.html"><code class="inline">Ash.ToTenant</code></a> protocol) - The tenant to use for authorization</li><li><code class="inline">:alter_source?</code> (<a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types"><code class="inline">boolean/0</code></a>) - If set to <code class="inline">true</code>, the source being authorized is returned so it can be run. The default value is <code class="inline">false</code>.</li><li><code class="inline">:base_query</code> (<a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types"><code class="inline">term/0</code></a>) - A base query on which to apply an generated filters</li><li><code class="inline">:no_check?</code> (<a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types"><code class="inline">boolean/0</code></a>) - Whether or not authorization must pass at the strict/filter step, or if post-checks are allowed to be run The default value is <code class="inline">false</code>.</li><li><code class="inline">:on_must_pass_strict_check</code> (<a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types"><code class="inline">term/0</code></a>) - Override the value returned when <code class="inline">no_check?</code> is <code class="inline">true</code> but a check must be run.</li><li><code class="inline">:atomic_changeset</code> (<a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types"><code class="inline">term/0</code></a>) - A base query on which to apply an generated filters</li><li><code class="inline">:return_forbidden_error?</code> (<a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types"><code class="inline">boolean/0</code></a>) - Whether or not to return a forbidden error in cases of not being authorized. The default value is <code class="inline">false</code>.</li><li><code class="inline">:log?</code> (<a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types"><code class="inline">boolean/0</code></a>) - Whether or not to log the authorization result. The default value is <code class="inline">false</code>.</li></ul>
  </section>
</section>
<section class="detail" id="can_search?/4">

    <span id="can_search?/2"></span>

    <span id="can_search?/3"></span>

  <div class="detail-header">
    <a href="#can_search?/4" class="detail-link" data-no-tooltip="" aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">can_search?(actor, query, params_or_opts \\ %{}, opts \\ [])</h1>


    </div>
  </div>

  <section class="docstring">

<p>Runs authorization checks for <code class="inline">EhsEnforcement.Enforcement.Offender.search</code>, returning a boolean.
See <a href="https://hexdocs.pm/ash/3.7.6/Ash.html#can?/3"><code class="inline">Ash.can?/3</code></a> for more information</p><h2 id="can_search?/4-options" class="section-heading"><a href="#can_search?/4-options" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Options</span></h2><ul><li><code class="inline">:maybe_is</code> (<a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types"><code class="inline">term/0</code></a>) - If the actor <em>may</em> be able to perform the action, what value should be returned. The default value is <code class="inline">true</code>.</li><li><code class="inline">:filter_with</code> - If set to <code class="inline">:error</code>, the query will raise an error on a match. If set to <code class="inline">:filter</code> the query will filter out unauthorized access. Valid values are :filter, :error The default value is <code class="inline">:filter</code>.</li><li><code class="inline">:validate?</code> (<a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types"><code class="inline">boolean/0</code></a>) - Whether or not to treat an invalid action as a non-allowed action. The default value is <code class="inline">false</code>.</li><li><code class="inline">:reuse_values?</code> (<a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types"><code class="inline">boolean/0</code></a>) - Whether or not loaded data like aggregates, calculations and relationships should be checked in memory if possible, instead of querying. No effect if <code class="inline">pre_flight?</code> is <code class="inline">false</code>. The default value is <code class="inline">false</code>.</li><li><code class="inline">:pre_flight?</code> (<a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types"><code class="inline">boolean/0</code></a>) - Whether or not this is a pre_flight check (which may perform optimized in-memory checks) or the final proper check. The default value is <code class="inline">true</code>.</li><li><code class="inline">:scope</code> (<a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types"><code class="inline">term/0</code></a>) - A value that implements the <a href="https://hexdocs.pm/ash/3.7.6/Ash.Scope.ToOpts.html"><code class="inline">Ash.Scope.ToOpts</code></a> protocol. Will overwrite any actor, tenant or context provided. See <a href="https://hexdocs.pm/ash/3.7.6/Ash.Context.html"><code class="inline">Ash.Context</code></a> for more.</li><li><code class="inline">:run_queries?</code> (<a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types"><code class="inline">boolean/0</code></a>) - Whether or not to run queries. If set to <code class="inline">true</code>, <code class="inline">:maybe</code> will not be returned. The default value is <code class="inline">true</code>.</li><li><code class="inline">:data</code> - The record or records specifically attempting to be acted upon.</li><li><code class="inline">:tenant</code> (value that implements the <a href="https://hexdocs.pm/ash/3.7.6/Ash.ToTenant.html"><code class="inline">Ash.ToTenant</code></a> protocol) - The tenant to use for authorization</li><li><code class="inline">:alter_source?</code> (<a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types"><code class="inline">boolean/0</code></a>) - If set to <code class="inline">true</code>, the source being authorized is returned so it can be run. The default value is <code class="inline">false</code>.</li><li><code class="inline">:base_query</code> (<a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types"><code class="inline">term/0</code></a>) - A base query on which to apply an generated filters</li><li><code class="inline">:no_check?</code> (<a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types"><code class="inline">boolean/0</code></a>) - Whether or not authorization must pass at the strict/filter step, or if post-checks are allowed to be run The default value is <code class="inline">false</code>.</li><li><code class="inline">:on_must_pass_strict_check</code> (<a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types"><code class="inline">term/0</code></a>) - Override the value returned when <code class="inline">no_check?</code> is <code class="inline">true</code> but a check must be run.</li><li><code class="inline">:atomic_changeset</code> (<a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types"><code class="inline">term/0</code></a>) - A base query on which to apply an generated filters</li><li><code class="inline">:return_forbidden_error?</code> (<a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types"><code class="inline">boolean/0</code></a>) - Whether or not to return a forbidden error in cases of not being authorized. The default value is <code class="inline">false</code>.</li><li><code class="inline">:log?</code> (<a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types"><code class="inline">boolean/0</code></a>) - Whether or not to log the authorization result. The default value is <code class="inline">false</code>.</li></ul>
  </section>
</section>
<section class="detail" id="can_update_statistics/4">

    <span id="can_update_statistics/2"></span>

    <span id="can_update_statistics/3"></span>

  <div class="detail-header">
    <a href="#can_update_statistics/4" class="detail-link" data-no-tooltip="" aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">can_update_statistics(actor, record, params_or_opts \\ %{}, opts \\ [])</h1>


    </div>
  </div>

  <section class="docstring">

<p>Runs authorization checks for <code class="inline">EhsEnforcement.Enforcement.Offender.update_statistics</code>
See <a href="https://hexdocs.pm/ash/3.7.6/Ash.html#can/3"><code class="inline">Ash.can/3</code></a> for more information</p><h2 id="can_update_statistics/4-options" class="section-heading"><a href="#can_update_statistics/4-options" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Options</span></h2><ul><li><code class="inline">:maybe_is</code> (<a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types"><code class="inline">term/0</code></a>) - If the actor <em>may</em> be able to perform the action, what value should be returned. The default value is <code class="inline">:maybe</code>.</li><li><code class="inline">:filter_with</code> - If set to <code class="inline">:error</code>, the query will raise an error on a match. If set to <code class="inline">:filter</code> the query will filter out unauthorized access. Valid values are :filter, :error The default value is <code class="inline">:filter</code>.</li><li><code class="inline">:validate?</code> (<a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types"><code class="inline">boolean/0</code></a>) - Whether or not to treat an invalid action as a non-allowed action. The default value is <code class="inline">false</code>.</li><li><code class="inline">:reuse_values?</code> (<a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types"><code class="inline">boolean/0</code></a>) - Whether or not loaded data like aggregates, calculations and relationships should be checked in memory if possible, instead of querying. No effect if <code class="inline">pre_flight?</code> is <code class="inline">false</code>. The default value is <code class="inline">false</code>.</li><li><code class="inline">:pre_flight?</code> (<a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types"><code class="inline">boolean/0</code></a>) - Whether or not this is a pre_flight check (which may perform optimized in-memory checks) or the final proper check. The default value is <code class="inline">true</code>.</li><li><code class="inline">:scope</code> (<a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types"><code class="inline">term/0</code></a>) - A value that implements the <a href="https://hexdocs.pm/ash/3.7.6/Ash.Scope.ToOpts.html"><code class="inline">Ash.Scope.ToOpts</code></a> protocol. Will overwrite any actor, tenant or context provided. See <a href="https://hexdocs.pm/ash/3.7.6/Ash.Context.html"><code class="inline">Ash.Context</code></a> for more.</li><li><code class="inline">:run_queries?</code> (<a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types"><code class="inline">boolean/0</code></a>) - Whether or not to run queries. If set to <code class="inline">true</code>, <code class="inline">:maybe</code> will not be returned. The default value is <code class="inline">true</code>.</li><li><code class="inline">:data</code> - The record or records specifically attempting to be acted upon.</li><li><code class="inline">:tenant</code> (value that implements the <a href="https://hexdocs.pm/ash/3.7.6/Ash.ToTenant.html"><code class="inline">Ash.ToTenant</code></a> protocol) - The tenant to use for authorization</li><li><code class="inline">:alter_source?</code> (<a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types"><code class="inline">boolean/0</code></a>) - If set to <code class="inline">true</code>, the source being authorized is returned so it can be run. The default value is <code class="inline">false</code>.</li><li><code class="inline">:base_query</code> (<a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types"><code class="inline">term/0</code></a>) - A base query on which to apply an generated filters</li><li><code class="inline">:no_check?</code> (<a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types"><code class="inline">boolean/0</code></a>) - Whether or not authorization must pass at the strict/filter step, or if post-checks are allowed to be run The default value is <code class="inline">false</code>.</li><li><code class="inline">:on_must_pass_strict_check</code> (<a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types"><code class="inline">term/0</code></a>) - Override the value returned when <code class="inline">no_check?</code> is <code class="inline">true</code> but a check must be run.</li><li><code class="inline">:atomic_changeset</code> (<a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types"><code class="inline">term/0</code></a>) - A base query on which to apply an generated filters</li><li><code class="inline">:return_forbidden_error?</code> (<a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types"><code class="inline">boolean/0</code></a>) - Whether or not to return a forbidden error in cases of not being authorized. The default value is <code class="inline">false</code>.</li><li><code class="inline">:log?</code> (<a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types"><code class="inline">boolean/0</code></a>) - Whether or not to log the authorization result. The default value is <code class="inline">false</code>.</li></ul>
  </section>
</section>
<section class="detail" id="can_update_statistics?/4">

    <span id="can_update_statistics?/2"></span>

    <span id="can_update_statistics?/3"></span>

  <div class="detail-header">
    <a href="#can_update_statistics?/4" class="detail-link" data-no-tooltip="" aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">can_update_statistics?(actor, record, params_or_opts \\ %{}, opts \\ [])</h1>


    </div>
  </div>

  <section class="docstring">

<p>Runs authorization checks for <code class="inline">EhsEnforcement.Enforcement.Offender.update_statistics</code>, returning a boolean.
See <a href="https://hexdocs.pm/ash/3.7.6/Ash.html#can?/3"><code class="inline">Ash.can?/3</code></a> for more information</p><h2 id="can_update_statistics?/4-options" class="section-heading"><a href="#can_update_statistics?/4-options" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Options</span></h2><ul><li><code class="inline">:maybe_is</code> (<a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types"><code class="inline">term/0</code></a>) - If the actor <em>may</em> be able to perform the action, what value should be returned. The default value is <code class="inline">true</code>.</li><li><code class="inline">:filter_with</code> - If set to <code class="inline">:error</code>, the query will raise an error on a match. If set to <code class="inline">:filter</code> the query will filter out unauthorized access. Valid values are :filter, :error The default value is <code class="inline">:filter</code>.</li><li><code class="inline">:validate?</code> (<a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types"><code class="inline">boolean/0</code></a>) - Whether or not to treat an invalid action as a non-allowed action. The default value is <code class="inline">false</code>.</li><li><code class="inline">:reuse_values?</code> (<a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types"><code class="inline">boolean/0</code></a>) - Whether or not loaded data like aggregates, calculations and relationships should be checked in memory if possible, instead of querying. No effect if <code class="inline">pre_flight?</code> is <code class="inline">false</code>. The default value is <code class="inline">false</code>.</li><li><code class="inline">:pre_flight?</code> (<a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types"><code class="inline">boolean/0</code></a>) - Whether or not this is a pre_flight check (which may perform optimized in-memory checks) or the final proper check. The default value is <code class="inline">true</code>.</li><li><code class="inline">:scope</code> (<a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types"><code class="inline">term/0</code></a>) - A value that implements the <a href="https://hexdocs.pm/ash/3.7.6/Ash.Scope.ToOpts.html"><code class="inline">Ash.Scope.ToOpts</code></a> protocol. Will overwrite any actor, tenant or context provided. See <a href="https://hexdocs.pm/ash/3.7.6/Ash.Context.html"><code class="inline">Ash.Context</code></a> for more.</li><li><code class="inline">:run_queries?</code> (<a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types"><code class="inline">boolean/0</code></a>) - Whether or not to run queries. If set to <code class="inline">true</code>, <code class="inline">:maybe</code> will not be returned. The default value is <code class="inline">true</code>.</li><li><code class="inline">:data</code> - The record or records specifically attempting to be acted upon.</li><li><code class="inline">:tenant</code> (value that implements the <a href="https://hexdocs.pm/ash/3.7.6/Ash.ToTenant.html"><code class="inline">Ash.ToTenant</code></a> protocol) - The tenant to use for authorization</li><li><code class="inline">:alter_source?</code> (<a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types"><code class="inline">boolean/0</code></a>) - If set to <code class="inline">true</code>, the source being authorized is returned so it can be run. The default value is <code class="inline">false</code>.</li><li><code class="inline">:base_query</code> (<a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types"><code class="inline">term/0</code></a>) - A base query on which to apply an generated filters</li><li><code class="inline">:no_check?</code> (<a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types"><code class="inline">boolean/0</code></a>) - Whether or not authorization must pass at the strict/filter step, or if post-checks are allowed to be run The default value is <code class="inline">false</code>.</li><li><code class="inline">:on_must_pass_strict_check</code> (<a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types"><code class="inline">term/0</code></a>) - Override the value returned when <code class="inline">no_check?</code> is <code class="inline">true</code> but a check must be run.</li><li><code class="inline">:atomic_changeset</code> (<a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types"><code class="inline">term/0</code></a>) - A base query on which to apply an generated filters</li><li><code class="inline">:return_forbidden_error?</code> (<a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types"><code class="inline">boolean/0</code></a>) - Whether or not to return a forbidden error in cases of not being authorized. The default value is <code class="inline">false</code>.</li><li><code class="inline">:log?</code> (<a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types"><code class="inline">boolean/0</code></a>) - Whether or not to log the authorization result. The default value is <code class="inline">false</code>.</li></ul>
  </section>
</section>
<section class="detail" id="changeset_to_create/3">

    <span id="changeset_to_create/1"></span>

    <span id="changeset_to_create/2"></span>

  <div class="detail-header">
    <a href="#changeset_to_create/3" class="detail-link" data-no-tooltip="" aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">changeset_to_create(name, params_or_opts \\ %{}, opts \\ [])</h1>


    </div>
  </div>

  <section class="docstring">

<p>Returns the changeset corresponding to the action.</p><h2 id="changeset_to_create/3-options" class="section-heading"><a href="#changeset_to_create/3-options" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Options</span></h2><ul><li><code class="inline">:tracer</code> (one or a list of module that adopts <a href="https://hexdocs.pm/ash/3.7.6/Ash.Tracer.html"><code class="inline">Ash.Tracer</code></a>) - A tracer that implements the <a href="https://hexdocs.pm/ash/3.7.6/Ash.Tracer.html"><code class="inline">Ash.Tracer</code></a> behaviour. See that module for more.</li><li><code class="inline">:authorize?</code> - If an actor option is provided (even if it is <code class="inline">nil</code>), authorization happens automatically. If not, this flag can be used to authorize with no user.</li><li><code class="inline">:tenant</code> (value that implements the <a href="https://hexdocs.pm/ash/3.7.6/Ash.ToTenant.html"><code class="inline">Ash.ToTenant</code></a> protocol) - A tenant to set on the query or changeset</li><li><code class="inline">:actor</code> (<a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types"><code class="inline">term/0</code></a>) - If an actor is provided, it will be used in conjunction with the authorizers of a resource to authorize access</li><li><code class="inline">:scope</code> (<a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types"><code class="inline">term/0</code></a>) - A value that implements the <a href="https://hexdocs.pm/ash/3.7.6/Ash.Scope.ToOpts.html"><code class="inline">Ash.Scope.ToOpts</code></a> protocol, for passing around actor/tenant/context in a single value. See <a href="https://hexdocs.pm/ash/3.7.6/Ash.Scope.ToOpts.html"><code class="inline">Ash.Scope.ToOpts</code></a> for more.</li><li><code class="inline">:changeset</code> (<a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types"><code class="inline">term/0</code></a>) - A changeset to seed the action with.</li></ul>
  </section>
</section>
<section class="detail" id="changeset_to_update_statistics/3">

    <span id="changeset_to_update_statistics/1"></span>

    <span id="changeset_to_update_statistics/2"></span>

  <div class="detail-header">
    <a href="#changeset_to_update_statistics/3" class="detail-link" data-no-tooltip="" aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">changeset_to_update_statistics(record, params_or_opts \\ %{}, opts \\ [])</h1>


    </div>
  </div>

  <section class="docstring">

<p>Returns the changeset corresponding to the action.</p><h2 id="changeset_to_update_statistics/3-options" class="section-heading"><a href="#changeset_to_update_statistics/3-options" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Options</span></h2><ul><li><code class="inline">:tracer</code> (one or a list of module that adopts <a href="https://hexdocs.pm/ash/3.7.6/Ash.Tracer.html"><code class="inline">Ash.Tracer</code></a>) - A tracer that implements the <a href="https://hexdocs.pm/ash/3.7.6/Ash.Tracer.html"><code class="inline">Ash.Tracer</code></a> behaviour. See that module for more.</li><li><code class="inline">:authorize?</code> - If an actor option is provided (even if it is <code class="inline">nil</code>), authorization happens automatically. If not, this flag can be used to authorize with no user.</li><li><code class="inline">:tenant</code> (value that implements the <a href="https://hexdocs.pm/ash/3.7.6/Ash.ToTenant.html"><code class="inline">Ash.ToTenant</code></a> protocol) - A tenant to set on the query or changeset</li><li><code class="inline">:actor</code> (<a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types"><code class="inline">term/0</code></a>) - If an actor is provided, it will be used in conjunction with the authorizers of a resource to authorize access</li><li><code class="inline">:scope</code> (<a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types"><code class="inline">term/0</code></a>) - A value that implements the <a href="https://hexdocs.pm/ash/3.7.6/Ash.Scope.ToOpts.html"><code class="inline">Ash.Scope.ToOpts</code></a> protocol, for passing around actor/tenant/context in a single value. See <a href="https://hexdocs.pm/ash/3.7.6/Ash.Scope.ToOpts.html"><code class="inline">Ash.Scope.ToOpts</code></a> for more.</li></ul>
  </section>
</section>
<section class="detail" id="create/3">

    <span id="create/1"></span>

    <span id="create/2"></span>

  <div class="detail-header">
    <a href="#create/3" class="detail-link" data-no-tooltip="" aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">create(name, params \\ nil, opts \\ nil)</h1>


    </div>
  </div>

  <section class="docstring">

<p>Calls the create action on EhsEnforcement.Enforcement.Offender.</p><h1>Arguments</h1><ul><li>name</li></ul><h1>Inputs</h1><ul><li>total_cases</li><li>county - County from EA structured address (e.g., 'SOUTH YORKSHIRE')</li><li>country</li><li>total_notices</li><li>company_registration_number - Companies House registration number (e.g., '04622955')</li><li>sic_code</li><li>main_activity</li><li>total_fines</li><li>business_type</li><li>first_seen_date</li><li>postcode</li><li>agencies</li><li>industry</li><li>local_authority</li><li>industry_sectors - EA detailed industry sectors (e.g., ['Manufacturing - General Engineering'])</li><li>town - Town from EA structured address (e.g., 'BARNSLEY')</li><li>last_seen_date</li><li>address</li></ul><h2 id="create/3-options" class="section-heading"><a href="#create/3-options" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Options</span></h2><ul><li><code class="inline">:upsert?</code> (<a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types"><code class="inline">boolean/0</code></a>) - If a conflict is found based on the primary key, the record is updated in the database (requires upsert support) The default value is <code class="inline">false</code>.</li><li><code class="inline">:return_skipped_upsert?</code> (<a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types"><code class="inline">boolean/0</code></a>) - If <code class="inline">true</code>, and a record was <em>not</em> upserted because its filter prevented the upsert, the original record (which was <em>not</em> upserted) will be returned. The default value is <code class="inline">false</code>.</li><li><code class="inline">:upsert_identity</code> (<a href="https://hexdocs.pm/elixir/typespecs.html#basic-types"><code class="inline">atom/0</code></a>) - The identity to use when detecting conflicts for <code class="inline">upsert?</code>, e.g. <code class="inline">upsert_identity: :full_name</code>. By default, the primary key is used. Has no effect if <code class="inline">upsert?: true</code> is not provided</li><li><code class="inline">:upsert_fields</code> - The fields to upsert. If not set, the action's upsert_fields is used, and if that is not set, then any fields not being set to defaults are written.</li><li><code class="inline">:upsert_condition</code> (<a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types"><code class="inline">term/0</code></a>) - An expression to check if the record should be updated when there's a conflict.</li><li><code class="inline">:timeout</code> (<a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types"><code class="inline">timeout/0</code></a>) - A positive integer, or <code class="inline">:infinity</code>. If none is provided, the timeout configured on the domain is used.</li><li><code class="inline">:tracer</code> (one or a list of module that adopts <a href="https://hexdocs.pm/ash/3.7.6/Ash.Tracer.html"><code class="inline">Ash.Tracer</code></a>) - A tracer that implements the <a href="https://hexdocs.pm/ash/3.7.6/Ash.Tracer.html"><code class="inline">Ash.Tracer</code></a> behaviour. See that module for more.</li><li><code class="inline">:action</code> (<a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types"><code class="inline">term/0</code></a>) - The action to use, either an Action struct or the name of the action</li><li><code class="inline">:authorize?</code> - If an actor option is provided (even if it is <code class="inline">nil</code>), authorization happens automatically. If not, this flag can be used to authorize with no user.</li><li><code class="inline">:context</code> (<a href="https://hexdocs.pm/elixir/typespecs.html#basic-types"><code class="inline">map/0</code></a>) - Context to set on the query, changeset, or input</li><li><code class="inline">:tenant</code> (value that implements the <a href="https://hexdocs.pm/ash/3.7.6/Ash.ToTenant.html"><code class="inline">Ash.ToTenant</code></a> protocol) - A tenant to set on the query or changeset</li><li><code class="inline">:actor</code> (<a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types"><code class="inline">term/0</code></a>) - If an actor is provided, it will be used in conjunction with the authorizers of a resource to authorize access</li><li><code class="inline">:scope</code> (<a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types"><code class="inline">term/0</code></a>) - A value that implements the <a href="https://hexdocs.pm/ash/3.7.6/Ash.Scope.ToOpts.html"><code class="inline">Ash.Scope.ToOpts</code></a> protocol, for passing around actor/tenant/context in a single value. See <a href="https://hexdocs.pm/ash/3.7.6/Ash.Scope.ToOpts.html"><code class="inline">Ash.Scope.ToOpts</code></a> for more.</li><li><code class="inline">:return_notifications?</code> (<a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types"><code class="inline">boolean/0</code></a>) - Use this if you're running ash actions in your own transaction and you want to manually handle sending notifications.<br/>If a transaction is ongoing, and this is false, notifications will be discarded, otherwise
the return value is <code class="inline">{:ok, result, notifications}</code> (or <code class="inline">{:ok, notifications}</code>)<br/>To send notifications later, use <code class="inline">Ash.Notifier.notify(notifications)</code>. It sends any notifications
that can be sent, and returns the rest. The default value is <code class="inline">false</code>.</li><li><code class="inline">:rollback_on_error?</code> (<a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types"><code class="inline">boolean/0</code></a>) - Whether or not to rollback the transaction on error, if the resource is in a transaction.<br/>If the action has <code class="inline">transaction? false</code> this option has no effect. If an error is returned from the
data layer and the resource is in a transaction, the transaction is always rolled back, regardless. The default value is <code class="inline">true</code>.</li><li><code class="inline">:notification_metadata</code> (<a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types"><code class="inline">term/0</code></a>) - Metadata to be merged into the metadata field for all notifications sent from this operation. The default value is <code class="inline">%{}</code>.</li><li><code class="inline">:skip_unknown_inputs</code> - A list of inputs that, if provided, will be ignored if they are not recognized by the action. Use <code class="inline">:*</code> to indicate all unknown keys.</li><li><code class="inline">:load</code> (<a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types"><code class="inline">term/0</code></a>) - A load statement to add onto the changeset</li><li><code class="inline">:changeset</code> (<a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types"><code class="inline">term/0</code></a>) - A changeset to seed the action with.</li><li><code class="inline">:bulk_options</code> (<a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types"><code class="inline">keyword/0</code></a>) - Options passed to <code class="inline">Ash.bulk_create</code>, if a list or stream of inputs is provided.<ul><li><code class="inline">:select</code> (list of <a href="https://hexdocs.pm/elixir/typespecs.html#basic-types"><code class="inline">atom/0</code></a>) - A select statement to apply to records. Ignored if <code class="inline">return_records?</code> is not true.</li><li><code class="inline">:after_action</code> (function of arity 2) - An after_action hook to be added to each processed changeset</li><li><code class="inline">:read_action</code> (<a href="https://hexdocs.pm/elixir/typespecs.html#basic-types"><code class="inline">atom/0</code></a>) - The action to use when building the read query.</li><li><code class="inline">:assume_casted?</code> (<a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types"><code class="inline">boolean/0</code></a>) - Whether or not to cast attributes and arguments as input. This is an optimization for cases where the input is already casted and/or not in need of casting The default value is <code class="inline">false</code>.</li><li><code class="inline">:select</code> (list of <a href="https://hexdocs.pm/elixir/typespecs.html#basic-types"><code class="inline">atom/0</code></a>) - A select statement to apply to records. Ignored if <code class="inline">return_records?</code> is not true.</li><li><code class="inline">:authorize_query_with</code> - If set to <code class="inline">:error</code>, instead of filtering unauthorized query results, unauthorized query results will raise an appropriate forbidden error. Uses <code class="inline">authorize_with</code> if not set.</li><li><code class="inline">:authorize_changeset_with</code> - If set to <code class="inline">:error</code>, instead of filtering unauthorized changes, unauthorized changes will raise an appropriate forbidden error. Uses <code class="inline">authorize_with</code> if not set.</li><li><code class="inline">:authorize_with</code> - If set to <code class="inline">:error</code>, instead of filtering unauthorized query results, unauthorized query results will raise an appropriate forbidden error. The default value is <code class="inline">:filter</code>.</li><li><code class="inline">:private_arguments</code> (<a href="https://hexdocs.pm/elixir/typespecs.html#basic-types"><code class="inline">map/0</code></a>) - Private argument values to set on each changeset before validations and changes are run. The default value is <code class="inline">%{}</code>.</li><li><code class="inline">:sorted?</code> (<a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types"><code class="inline">boolean/0</code></a>) - Whether or not to sort results by their input position, in cases where <code class="inline">return_records?: true</code> was provided. The default value is <code class="inline">false</code>.</li><li><code class="inline">:return_records?</code> (<a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types"><code class="inline">boolean/0</code></a>) - Whether or not to return all of the records that were inserted. Defaults to false to account for large inserts. The default value is <code class="inline">false</code>.</li><li><code class="inline">:return_errors?</code> (<a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types"><code class="inline">boolean/0</code></a>) - Whether to return all errors that occur during the operation. Defaults to the value of <code class="inline">:bulk_actions_default_to_errors?</code> in your config, or <code class="inline">false</code> if not set. Returning all errors may be expensive for large inserts. The default value is <code class="inline">false</code>.</li><li><code class="inline">:batch_size</code> (<a href="https://hexdocs.pm/elixir/typespecs.html#basic-types"><code class="inline">pos_integer/0</code></a>) - The number of records to include in each batch. Defaults to the <code class="inline">default_limit</code>
or <code class="inline">max_page_size</code> of the action, or 100.</li><li><code class="inline">:return_stream?</code> (<a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types"><code class="inline">boolean/0</code></a>) - If set to <code class="inline">true</code>, instead of an <a href="https://hexdocs.pm/ash/3.7.6/Ash.BulkResult.html"><code class="inline">Ash.BulkResult</code></a>, a mixed stream is returned.
Potential elements:
<code class="inline">{:notification, notification}</code> - if <code class="inline">return_notifications?</code> is set to <code class="inline">true</code>
<code class="inline">{:ok, record}</code> - if <code class="inline">return_records?</code> is set to <code class="inline">true</code>
<code class="inline">{:error, error}</code> - an error that occurred. May be changeset or an individual error.
The default value is <code class="inline">false</code>.</li><li><code class="inline">:return_nothing?</code> (<a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types"><code class="inline">boolean/0</code></a>) - Mutes warnings about returning nothing.
Only relevant if <code class="inline">return_stream?</code> is set to <code class="inline">true</code> and all other
<code class="inline">return_*?</code> options are set to <code class="inline">false</code>.
The default value is <code class="inline">false</code>.</li><li><code class="inline">:stop_on_error?</code> (<a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types"><code class="inline">boolean/0</code></a>) - If true, the first encountered error will stop the action and be returned. Otherwise, errors
will be skipped. The default value is <code class="inline">false</code>.</li><li><code class="inline">:notify?</code> (<a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types"><code class="inline">boolean/0</code></a>) - Whether or not to generate any notifications. If this is set to <code class="inline">true</code> then the data layer must return
the results from each batch. This may be intensive for large bulk actions.
Notifications will be automatically sent unless <code class="inline">return_notifications?</code> is set to <code class="inline">true</code>.
The default value is <code class="inline">false</code>.</li><li><code class="inline">:transaction</code> - Whether or not to wrap the entire execution in a transaction, each batch, or not at all.
Keep in mind:
<code class="inline">before_transaction</code> and <code class="inline">after_transaction</code> hooks attached to changesets will have to be run
<em>inside</em> the transaction if you choose <code class="inline">transaction: :all</code>.
The default value is <code class="inline">:batch</code>.</li><li><code class="inline">:max_concurrency</code> (<a href="https://hexdocs.pm/elixir/typespecs.html#basic-types"><code class="inline">non_neg_integer/0</code></a>) - If set to a value greater than 0, up to that many tasks will be started to run batches asynchronously The default value is <code class="inline">0</code>.</li></ul></li><li><code class="inline">:private_arguments</code> (<a href="https://hexdocs.pm/elixir/typespecs.html#basic-types"><code class="inline">map/0</code></a>) - Private argument values to set before validations and changes. The default value is <code class="inline">%{}</code>.</li></ul>
  </section>
</section>
<section class="detail" id="create!/3">

    <span id="create!/1"></span>

    <span id="create!/2"></span>

  <div class="detail-header">
    <a href="#create!/3" class="detail-link" data-no-tooltip="" aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">create!(name, params \\ nil, opts \\ nil)</h1>


    </div>
  </div>

  <section class="docstring">

<p>Calls the create action on EhsEnforcement.Enforcement.Offender.
Raises any errors instead of returning them</p><h1>Arguments</h1><ul><li>name</li></ul><h1>Inputs</h1><ul><li>total_cases</li><li>county - County from EA structured address (e.g., 'SOUTH YORKSHIRE')</li><li>country</li><li>total_notices</li><li>company_registration_number - Companies House registration number (e.g., '04622955')</li><li>sic_code</li><li>main_activity</li><li>total_fines</li><li>business_type</li><li>first_seen_date</li><li>postcode</li><li>agencies</li><li>industry</li><li>local_authority</li><li>industry_sectors - EA detailed industry sectors (e.g., ['Manufacturing - General Engineering'])</li><li>town - Town from EA structured address (e.g., 'BARNSLEY')</li><li>last_seen_date</li><li>address</li></ul><h2 id="create!/3-options" class="section-heading"><a href="#create!/3-options" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Options</span></h2><ul><li><code class="inline">:upsert?</code> (<a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types"><code class="inline">boolean/0</code></a>) - If a conflict is found based on the primary key, the record is updated in the database (requires upsert support) The default value is <code class="inline">false</code>.</li><li><code class="inline">:return_skipped_upsert?</code> (<a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types"><code class="inline">boolean/0</code></a>) - If <code class="inline">true</code>, and a record was <em>not</em> upserted because its filter prevented the upsert, the original record (which was <em>not</em> upserted) will be returned. The default value is <code class="inline">false</code>.</li><li><code class="inline">:upsert_identity</code> (<a href="https://hexdocs.pm/elixir/typespecs.html#basic-types"><code class="inline">atom/0</code></a>) - The identity to use when detecting conflicts for <code class="inline">upsert?</code>, e.g. <code class="inline">upsert_identity: :full_name</code>. By default, the primary key is used. Has no effect if <code class="inline">upsert?: true</code> is not provided</li><li><code class="inline">:upsert_fields</code> - The fields to upsert. If not set, the action's upsert_fields is used, and if that is not set, then any fields not being set to defaults are written.</li><li><code class="inline">:upsert_condition</code> (<a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types"><code class="inline">term/0</code></a>) - An expression to check if the record should be updated when there's a conflict.</li><li><code class="inline">:timeout</code> (<a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types"><code class="inline">timeout/0</code></a>) - A positive integer, or <code class="inline">:infinity</code>. If none is provided, the timeout configured on the domain is used.</li><li><code class="inline">:tracer</code> (one or a list of module that adopts <a href="https://hexdocs.pm/ash/3.7.6/Ash.Tracer.html"><code class="inline">Ash.Tracer</code></a>) - A tracer that implements the <a href="https://hexdocs.pm/ash/3.7.6/Ash.Tracer.html"><code class="inline">Ash.Tracer</code></a> behaviour. See that module for more.</li><li><code class="inline">:action</code> (<a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types"><code class="inline">term/0</code></a>) - The action to use, either an Action struct or the name of the action</li><li><code class="inline">:authorize?</code> - If an actor option is provided (even if it is <code class="inline">nil</code>), authorization happens automatically. If not, this flag can be used to authorize with no user.</li><li><code class="inline">:context</code> (<a href="https://hexdocs.pm/elixir/typespecs.html#basic-types"><code class="inline">map/0</code></a>) - Context to set on the query, changeset, or input</li><li><code class="inline">:tenant</code> (value that implements the <a href="https://hexdocs.pm/ash/3.7.6/Ash.ToTenant.html"><code class="inline">Ash.ToTenant</code></a> protocol) - A tenant to set on the query or changeset</li><li><code class="inline">:actor</code> (<a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types"><code class="inline">term/0</code></a>) - If an actor is provided, it will be used in conjunction with the authorizers of a resource to authorize access</li><li><code class="inline">:scope</code> (<a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types"><code class="inline">term/0</code></a>) - A value that implements the <a href="https://hexdocs.pm/ash/3.7.6/Ash.Scope.ToOpts.html"><code class="inline">Ash.Scope.ToOpts</code></a> protocol, for passing around actor/tenant/context in a single value. See <a href="https://hexdocs.pm/ash/3.7.6/Ash.Scope.ToOpts.html"><code class="inline">Ash.Scope.ToOpts</code></a> for more.</li><li><code class="inline">:return_notifications?</code> (<a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types"><code class="inline">boolean/0</code></a>) - Use this if you're running ash actions in your own transaction and you want to manually handle sending notifications.<br/>If a transaction is ongoing, and this is false, notifications will be discarded, otherwise
the return value is <code class="inline">{:ok, result, notifications}</code> (or <code class="inline">{:ok, notifications}</code>)<br/>To send notifications later, use <code class="inline">Ash.Notifier.notify(notifications)</code>. It sends any notifications
that can be sent, and returns the rest. The default value is <code class="inline">false</code>.</li><li><code class="inline">:rollback_on_error?</code> (<a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types"><code class="inline">boolean/0</code></a>) - Whether or not to rollback the transaction on error, if the resource is in a transaction.<br/>If the action has <code class="inline">transaction? false</code> this option has no effect. If an error is returned from the
data layer and the resource is in a transaction, the transaction is always rolled back, regardless. The default value is <code class="inline">true</code>.</li><li><code class="inline">:notification_metadata</code> (<a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types"><code class="inline">term/0</code></a>) - Metadata to be merged into the metadata field for all notifications sent from this operation. The default value is <code class="inline">%{}</code>.</li><li><code class="inline">:skip_unknown_inputs</code> - A list of inputs that, if provided, will be ignored if they are not recognized by the action. Use <code class="inline">:*</code> to indicate all unknown keys.</li><li><code class="inline">:load</code> (<a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types"><code class="inline">term/0</code></a>) - A load statement to add onto the changeset</li><li><code class="inline">:changeset</code> (<a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types"><code class="inline">term/0</code></a>) - A changeset to seed the action with.</li><li><code class="inline">:bulk_options</code> (<a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types"><code class="inline">keyword/0</code></a>) - Options passed to <code class="inline">Ash.bulk_create</code>, if a list or stream of inputs is provided.<ul><li><code class="inline">:select</code> (list of <a href="https://hexdocs.pm/elixir/typespecs.html#basic-types"><code class="inline">atom/0</code></a>) - A select statement to apply to records. Ignored if <code class="inline">return_records?</code> is not true.</li><li><code class="inline">:after_action</code> (function of arity 2) - An after_action hook to be added to each processed changeset</li><li><code class="inline">:read_action</code> (<a href="https://hexdocs.pm/elixir/typespecs.html#basic-types"><code class="inline">atom/0</code></a>) - The action to use when building the read query.</li><li><code class="inline">:assume_casted?</code> (<a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types"><code class="inline">boolean/0</code></a>) - Whether or not to cast attributes and arguments as input. This is an optimization for cases where the input is already casted and/or not in need of casting The default value is <code class="inline">false</code>.</li><li><code class="inline">:select</code> (list of <a href="https://hexdocs.pm/elixir/typespecs.html#basic-types"><code class="inline">atom/0</code></a>) - A select statement to apply to records. Ignored if <code class="inline">return_records?</code> is not true.</li><li><code class="inline">:authorize_query_with</code> - If set to <code class="inline">:error</code>, instead of filtering unauthorized query results, unauthorized query results will raise an appropriate forbidden error. Uses <code class="inline">authorize_with</code> if not set.</li><li><code class="inline">:authorize_changeset_with</code> - If set to <code class="inline">:error</code>, instead of filtering unauthorized changes, unauthorized changes will raise an appropriate forbidden error. Uses <code class="inline">authorize_with</code> if not set.</li><li><code class="inline">:authorize_with</code> - If set to <code class="inline">:error</code>, instead of filtering unauthorized query results, unauthorized query results will raise an appropriate forbidden error. The default value is <code class="inline">:filter</code>.</li><li><code class="inline">:private_arguments</code> (<a href="https://hexdocs.pm/elixir/typespecs.html#basic-types"><code class="inline">map/0</code></a>) - Private argument values to set on each changeset before validations and changes are run. The default value is <code class="inline">%{}</code>.</li><li><code class="inline">:sorted?</code> (<a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types"><code class="inline">boolean/0</code></a>) - Whether or not to sort results by their input position, in cases where <code class="inline">return_records?: true</code> was provided. The default value is <code class="inline">false</code>.</li><li><code class="inline">:return_records?</code> (<a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types"><code class="inline">boolean/0</code></a>) - Whether or not to return all of the records that were inserted. Defaults to false to account for large inserts. The default value is <code class="inline">false</code>.</li><li><code class="inline">:return_errors?</code> (<a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types"><code class="inline">boolean/0</code></a>) - Whether to return all errors that occur during the operation. Defaults to the value of <code class="inline">:bulk_actions_default_to_errors?</code> in your config, or <code class="inline">false</code> if not set. Returning all errors may be expensive for large inserts. The default value is <code class="inline">false</code>.</li><li><code class="inline">:batch_size</code> (<a href="https://hexdocs.pm/elixir/typespecs.html#basic-types"><code class="inline">pos_integer/0</code></a>) - The number of records to include in each batch. Defaults to the <code class="inline">default_limit</code>
or <code class="inline">max_page_size</code> of the action, or 100.</li><li><code class="inline">:return_stream?</code> (<a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types"><code class="inline">boolean/0</code></a>) - If set to <code class="inline">true</code>, instead of an <a href="https://hexdocs.pm/ash/3.7.6/Ash.BulkResult.html"><code class="inline">Ash.BulkResult</code></a>, a mixed stream is returned.
Potential elements:
<code class="inline">{:notification, notification}</code> - if <code class="inline">return_notifications?</code> is set to <code class="inline">true</code>
<code class="inline">{:ok, record}</code> - if <code class="inline">return_records?</code> is set to <code class="inline">true</code>
<code class="inline">{:error, error}</code> - an error that occurred. May be changeset or an individual error.
The default value is <code class="inline">false</code>.</li><li><code class="inline">:return_nothing?</code> (<a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types"><code class="inline">boolean/0</code></a>) - Mutes warnings about returning nothing.
Only relevant if <code class="inline">return_stream?</code> is set to <code class="inline">true</code> and all other
<code class="inline">return_*?</code> options are set to <code class="inline">false</code>.
The default value is <code class="inline">false</code>.</li><li><code class="inline">:stop_on_error?</code> (<a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types"><code class="inline">boolean/0</code></a>) - If true, the first encountered error will stop the action and be returned. Otherwise, errors
will be skipped. The default value is <code class="inline">false</code>.</li><li><code class="inline">:notify?</code> (<a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types"><code class="inline">boolean/0</code></a>) - Whether or not to generate any notifications. If this is set to <code class="inline">true</code> then the data layer must return
the results from each batch. This may be intensive for large bulk actions.
Notifications will be automatically sent unless <code class="inline">return_notifications?</code> is set to <code class="inline">true</code>.
The default value is <code class="inline">false</code>.</li><li><code class="inline">:transaction</code> - Whether or not to wrap the entire execution in a transaction, each batch, or not at all.
Keep in mind:
<code class="inline">before_transaction</code> and <code class="inline">after_transaction</code> hooks attached to changesets will have to be run
<em>inside</em> the transaction if you choose <code class="inline">transaction: :all</code>.
The default value is <code class="inline">:batch</code>.</li><li><code class="inline">:max_concurrency</code> (<a href="https://hexdocs.pm/elixir/typespecs.html#basic-types"><code class="inline">non_neg_integer/0</code></a>) - If set to a value greater than 0, up to that many tasks will be started to run batches asynchronously The default value is <code class="inline">0</code>.</li></ul></li><li><code class="inline">:private_arguments</code> (<a href="https://hexdocs.pm/elixir/typespecs.html#basic-types"><code class="inline">map/0</code></a>) - Private argument values to set before validations and changes. The default value is <code class="inline">%{}</code>.</li></ul>
  </section>
</section>
<section class="detail" id="default_short_name/0">

  <div class="detail-header">
    <a href="#default_short_name/0" class="detail-link" data-no-tooltip="" aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">default_short_name()</h1>


    </div>
  </div>

  <section class="docstring">


  </section>
</section>
<section class="detail" id="find_or_create_offender/1">

  <div class="detail-header">
    <a href="#find_or_create_offender/1" class="detail-link" data-no-tooltip="" aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">find_or_create_offender(attrs)</h1>


    </div>
  </div>

  <section class="docstring">

<p>Finds or creates an offender with deduplication logic.</p><p>This function handles finding existing offenders by name and postcode,
with fuzzy matching fallback to prevent duplicates.</p>
  </section>
</section>
<section class="detail" id="input/1">

  <div class="detail-header">
    <a href="#input/1" class="detail-link" data-no-tooltip="" aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">input(opts)</h1>


    </div>
  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">@spec</span> input(values :: <a href="https://hexdocs.pm/elixir/typespecs.html#basic-types">map</a>() | <a href="https://hexdocs.pm/elixir/Keyword.html#t:t/0">Keyword.t</a>()) :: <a href="https://hexdocs.pm/elixir/typespecs.html#basic-types">map</a>() | <a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types">no_return</a>()</pre>

      </div>

<p>Validates that the keys in the provided input are valid for at least one action on the resource.</p><p>Raises a KeyError error at compile time if not. This exists because generally a struct should only ever
be created by Ash as a result of a successful action. You should not be creating records manually in code,
e.g <code class="inline">%MyResource{value: 1, value: 2}</code>. Generally that is fine, but often with embedded resources it is nice
to be able to validate the keys that are being provided, e.g</p><pre><code class="makeup elixir" translate="no"><span class="nc">Resource</span><span class="w">
</span><span class="o">|&gt;</span><span class="w"> </span><span class="nc">Ash.Changeset</span><span class="o">.</span><span class="n">for_create</span><span class="p" data-group-id="8375157805-1">(</span><span class="ss">:create</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="8375157805-2">%{</span><span class="ss">embedded</span><span class="p">:</span><span class="w"> </span><span class="nc">EmbeddedResource</span><span class="o">.</span><span class="n">input</span><span class="p" data-group-id="8375157805-3">(</span><span class="ss">foo</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="ss">bar</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p" data-group-id="8375157805-3">)</span><span class="p" data-group-id="8375157805-2">}</span><span class="p" data-group-id="8375157805-1">)</span><span class="w">
</span><span class="o">|&gt;</span><span class="w"> </span><span class="nc">Ash</span><span class="o">.</span><span class="n">create</span><span class="p" data-group-id="8375157805-4">(</span><span class="p" data-group-id="8375157805-4">)</span></code></pre>
  </section>
</section>
<section class="detail" id="input/2">

  <div class="detail-header">
    <a href="#input/2" class="detail-link" data-no-tooltip="" aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">input(opts, action)</h1>


    </div>
  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">@spec</span> input(values :: <a href="https://hexdocs.pm/elixir/typespecs.html#basic-types">map</a>() | <a href="https://hexdocs.pm/elixir/Keyword.html#t:t/0">Keyword.t</a>(), action :: <a href="https://hexdocs.pm/elixir/typespecs.html#basic-types">atom</a>()) :: <a href="https://hexdocs.pm/elixir/typespecs.html#basic-types">map</a>() | <a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types">no_return</a>()</pre>

      </div>

<p>Same as <a href="#input/1"><code class="inline">input/1</code></a>, except restricts the keys to values accepted by the action provided.</p>
  </section>
</section>
<section class="detail" id="normalize_company_name/1">

  <div class="detail-header">
    <a href="#normalize_company_name/1" class="detail-link" data-no-tooltip="" aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">normalize_company_name(name)</h1>


    </div>
  </div>

  <section class="docstring">

<p>Normalize company names to standard format for matching.</p>
  </section>
</section>
<section class="detail" id="primary_key_matches?/2">

  <div class="detail-header">
    <a href="#primary_key_matches?/2" class="detail-link" data-no-tooltip="" aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">primary_key_matches?(left, right)</h1>


    </div>
  </div>

  <section class="docstring">


  </section>
</section>
<section class="detail" id="query_to_search/3">

    <span id="query_to_search/1"></span>

    <span id="query_to_search/2"></span>

  <div class="detail-header">
    <a href="#query_to_search/3" class="detail-link" data-no-tooltip="" aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">query_to_search(query, params_or_opts \\ %{}, opts \\ [])</h1>


    </div>
  </div>

  <section class="docstring">

<p>Returns the query corresponding to the action.</p><h2 id="query_to_search/3-options" class="section-heading"><a href="#query_to_search/3-options" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Options</span></h2><ul><li><code class="inline">:tracer</code> (one or a list of module that adopts <a href="https://hexdocs.pm/ash/3.7.6/Ash.Tracer.html"><code class="inline">Ash.Tracer</code></a>) - A tracer that implements the <a href="https://hexdocs.pm/ash/3.7.6/Ash.Tracer.html"><code class="inline">Ash.Tracer</code></a> behaviour. See that module for more.</li><li><code class="inline">:authorize?</code> - If an actor option is provided (even if it is <code class="inline">nil</code>), authorization happens automatically. If not, this flag can be used to authorize with no user.</li><li><code class="inline">:tenant</code> (value that implements the <a href="https://hexdocs.pm/ash/3.7.6/Ash.ToTenant.html"><code class="inline">Ash.ToTenant</code></a> protocol) - A tenant to set on the query or changeset</li><li><code class="inline">:actor</code> (<a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types"><code class="inline">term/0</code></a>) - If an actor is provided, it will be used in conjunction with the authorizers of a resource to authorize access</li><li><code class="inline">:scope</code> (<a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types"><code class="inline">term/0</code></a>) - A value that implements the <a href="https://hexdocs.pm/ash/3.7.6/Ash.Scope.ToOpts.html"><code class="inline">Ash.Scope.ToOpts</code></a> protocol, for passing around actor/tenant/context in a single value. See <a href="https://hexdocs.pm/ash/3.7.6/Ash.Scope.ToOpts.html"><code class="inline">Ash.Scope.ToOpts</code></a> for more.</li><li><code class="inline">:query</code> - A query to seed the action with.</li></ul>
  </section>
</section>
<section class="detail" id="search/3">

    <span id="search/1"></span>

    <span id="search/2"></span>

  <div class="detail-header">
    <a href="#search/3" class="detail-link" data-no-tooltip="" aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">search(query, params \\ nil, opts \\ nil)</h1>


    </div>
  </div>

  <section class="docstring">

<p>Calls the search action on EhsEnforcement.Enforcement.Offender.</p><h1>Arguments</h1><ul><li>query</li></ul><h2 id="search/3-options" class="section-heading"><a href="#search/3-options" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Options</span></h2><ul><li><code class="inline">:page</code> - Pagination options, see <a href="https://hexdocs.pm/ash/3.7.6/Ash.html#read/2"><code class="inline">Ash.read/2</code></a> for more.</li><li><code class="inline">:load</code> (<a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types"><code class="inline">term/0</code></a>) - A load statement to add onto the query</li><li><code class="inline">:max_concurrency</code> (<a href="https://hexdocs.pm/elixir/typespecs.html#basic-types"><code class="inline">non_neg_integer/0</code></a>) - The maximum number of processes allowed to be started for parallel loading of relationships and calculations. Defaults to <code class="inline">System.schedulers_online() * 2</code></li><li><code class="inline">:lock</code> (<a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types"><code class="inline">term/0</code></a>) - A lock statement to add onto the query</li><li><code class="inline">:return_query?</code> (<a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types"><code class="inline">boolean/0</code></a>) - If <code class="inline">true</code>, the query that was ultimately used is returned as a third tuple element.<br/>The query goes through many potential changes during a request, potentially adding
authorization filters, or replacing relationships for other data layers with their
corresponding ids. This option can be used to get the true query that was sent to
the data layer. The default value is <code class="inline">false</code>.</li><li><code class="inline">:skip_unknown_inputs</code> - A list of inputs that, if provided, will be ignored if they are not recognized by the action. Use <code class="inline">:*</code> to indicate all unknown keys.</li><li><code class="inline">:reuse_values?</code> (<a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types"><code class="inline">boolean/0</code></a>) - Whether calculations are allowed to reuse values that have already been loaded, or must refetch them from the data layer. The default value is <code class="inline">false</code>.</li><li><code class="inline">:strict?</code> (<a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types"><code class="inline">boolean/0</code></a>) - If set to true, only specified attributes will be loaded when passing
  a list of fields to fetch on a relationship, which allows for more
  optimized data-fetching.<br/>  See <a href="https://hexdocs.pm/ash/3.7.6/Ash.Query.html#load/2"><code class="inline">Ash.Query.load/2</code></a>. The default value is <code class="inline">false</code>.</li><li><code class="inline">:authorize_with</code> - If set to <code class="inline">:error</code>, instead of applying authorization filters as a filter, any records not matching the authorization filter will cause an error to be returned. Valid values are :filter, :error The default value is <code class="inline">:filter</code>.</li><li><code class="inline">:timeout</code> (<a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types"><code class="inline">timeout/0</code></a>) - A positive integer, or <code class="inline">:infinity</code>. If none is provided, the timeout configured on the domain is used.</li><li><code class="inline">:tracer</code> (one or a list of module that adopts <a href="https://hexdocs.pm/ash/3.7.6/Ash.Tracer.html"><code class="inline">Ash.Tracer</code></a>) - A tracer that implements the <a href="https://hexdocs.pm/ash/3.7.6/Ash.Tracer.html"><code class="inline">Ash.Tracer</code></a> behaviour. See that module for more.</li><li><code class="inline">:action</code> (<a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types"><code class="inline">term/0</code></a>) - The action to use, either an Action struct or the name of the action</li><li><code class="inline">:authorize?</code> - If an actor option is provided (even if it is <code class="inline">nil</code>), authorization happens automatically. If not, this flag can be used to authorize with no user.</li><li><code class="inline">:context</code> (<a href="https://hexdocs.pm/elixir/typespecs.html#basic-types"><code class="inline">map/0</code></a>) - Context to set on the query, changeset, or input</li><li><code class="inline">:tenant</code> (value that implements the <a href="https://hexdocs.pm/ash/3.7.6/Ash.ToTenant.html"><code class="inline">Ash.ToTenant</code></a> protocol) - A tenant to set on the query or changeset</li><li><code class="inline">:actor</code> (<a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types"><code class="inline">term/0</code></a>) - If an actor is provided, it will be used in conjunction with the authorizers of a resource to authorize access</li><li><code class="inline">:scope</code> (<a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types"><code class="inline">term/0</code></a>) - A value that implements the <a href="https://hexdocs.pm/ash/3.7.6/Ash.Scope.ToOpts.html"><code class="inline">Ash.Scope.ToOpts</code></a> protocol, for passing around actor/tenant/context in a single value. See <a href="https://hexdocs.pm/ash/3.7.6/Ash.Scope.ToOpts.html"><code class="inline">Ash.Scope.ToOpts</code></a> for more.</li><li><code class="inline">:query</code> - A query to seed the action with.</li><li><code class="inline">:not_found_error?</code> (<a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types"><code class="inline">boolean/0</code></a>) - Whether or not to return or raise a <code class="inline">NotFound</code> error or to return <code class="inline">nil</code> when a get? action/interface is called.</li><li><code class="inline">:stream?</code> (<a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types"><code class="inline">boolean/0</code></a>) - If true, a stream of the results will be returned The default value is <code class="inline">false</code>.</li><li><code class="inline">:stream_options</code> (<a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types"><code class="inline">keyword/0</code></a>) - Options passed to <code class="inline">Ash.stream!</code>, if <code class="inline">stream?: true</code> is given<ul><li><code class="inline">:batch_size</code> (<a href="https://hexdocs.pm/elixir/typespecs.html#basic-types"><code class="inline">integer/0</code></a>) - How many records to request in each query run. Defaults to the pagination limits on the resource, or 250.</li><li><code class="inline">:allow_stream_with</code> - The 'worst' strategy allowed to be used to fetch records. See <a href="https://hexdocs.pm/ash/3.7.6/Ash.html#stream!/2"><code class="inline">Ash.stream!/2</code></a> docs for more. The default value is <code class="inline">:keyset</code>.</li><li><code class="inline">:stream_with</code> - The specific strategy to use to fetch records. See <a href="https://hexdocs.pm/ash/3.7.6/Ash.html#stream!/2"><code class="inline">Ash.stream!/2</code></a> docs for more.</li></ul></li></ul>
  </section>
</section>
<section class="detail" id="search!/3">

    <span id="search!/1"></span>

    <span id="search!/2"></span>

  <div class="detail-header">
    <a href="#search!/3" class="detail-link" data-no-tooltip="" aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">search!(query, params \\ nil, opts \\ nil)</h1>


    </div>
  </div>

  <section class="docstring">

<p>Calls the search action on EhsEnforcement.Enforcement.Offender.
Raises any errors instead of returning them</p><h1>Arguments</h1><ul><li>query</li></ul><h2 id="search!/3-options" class="section-heading"><a href="#search!/3-options" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Options</span></h2><ul><li><code class="inline">:page</code> - Pagination options, see <a href="https://hexdocs.pm/ash/3.7.6/Ash.html#read/2"><code class="inline">Ash.read/2</code></a> for more.</li><li><code class="inline">:load</code> (<a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types"><code class="inline">term/0</code></a>) - A load statement to add onto the query</li><li><code class="inline">:max_concurrency</code> (<a href="https://hexdocs.pm/elixir/typespecs.html#basic-types"><code class="inline">non_neg_integer/0</code></a>) - The maximum number of processes allowed to be started for parallel loading of relationships and calculations. Defaults to <code class="inline">System.schedulers_online() * 2</code></li><li><code class="inline">:lock</code> (<a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types"><code class="inline">term/0</code></a>) - A lock statement to add onto the query</li><li><code class="inline">:return_query?</code> (<a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types"><code class="inline">boolean/0</code></a>) - If <code class="inline">true</code>, the query that was ultimately used is returned as a third tuple element.<br/>The query goes through many potential changes during a request, potentially adding
authorization filters, or replacing relationships for other data layers with their
corresponding ids. This option can be used to get the true query that was sent to
the data layer. The default value is <code class="inline">false</code>.</li><li><code class="inline">:skip_unknown_inputs</code> - A list of inputs that, if provided, will be ignored if they are not recognized by the action. Use <code class="inline">:*</code> to indicate all unknown keys.</li><li><code class="inline">:reuse_values?</code> (<a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types"><code class="inline">boolean/0</code></a>) - Whether calculations are allowed to reuse values that have already been loaded, or must refetch them from the data layer. The default value is <code class="inline">false</code>.</li><li><code class="inline">:strict?</code> (<a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types"><code class="inline">boolean/0</code></a>) - If set to true, only specified attributes will be loaded when passing
  a list of fields to fetch on a relationship, which allows for more
  optimized data-fetching.<br/>  See <a href="https://hexdocs.pm/ash/3.7.6/Ash.Query.html#load/2"><code class="inline">Ash.Query.load/2</code></a>. The default value is <code class="inline">false</code>.</li><li><code class="inline">:authorize_with</code> - If set to <code class="inline">:error</code>, instead of applying authorization filters as a filter, any records not matching the authorization filter will cause an error to be returned. Valid values are :filter, :error The default value is <code class="inline">:filter</code>.</li><li><code class="inline">:timeout</code> (<a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types"><code class="inline">timeout/0</code></a>) - A positive integer, or <code class="inline">:infinity</code>. If none is provided, the timeout configured on the domain is used.</li><li><code class="inline">:tracer</code> (one or a list of module that adopts <a href="https://hexdocs.pm/ash/3.7.6/Ash.Tracer.html"><code class="inline">Ash.Tracer</code></a>) - A tracer that implements the <a href="https://hexdocs.pm/ash/3.7.6/Ash.Tracer.html"><code class="inline">Ash.Tracer</code></a> behaviour. See that module for more.</li><li><code class="inline">:action</code> (<a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types"><code class="inline">term/0</code></a>) - The action to use, either an Action struct or the name of the action</li><li><code class="inline">:authorize?</code> - If an actor option is provided (even if it is <code class="inline">nil</code>), authorization happens automatically. If not, this flag can be used to authorize with no user.</li><li><code class="inline">:context</code> (<a href="https://hexdocs.pm/elixir/typespecs.html#basic-types"><code class="inline">map/0</code></a>) - Context to set on the query, changeset, or input</li><li><code class="inline">:tenant</code> (value that implements the <a href="https://hexdocs.pm/ash/3.7.6/Ash.ToTenant.html"><code class="inline">Ash.ToTenant</code></a> protocol) - A tenant to set on the query or changeset</li><li><code class="inline">:actor</code> (<a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types"><code class="inline">term/0</code></a>) - If an actor is provided, it will be used in conjunction with the authorizers of a resource to authorize access</li><li><code class="inline">:scope</code> (<a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types"><code class="inline">term/0</code></a>) - A value that implements the <a href="https://hexdocs.pm/ash/3.7.6/Ash.Scope.ToOpts.html"><code class="inline">Ash.Scope.ToOpts</code></a> protocol, for passing around actor/tenant/context in a single value. See <a href="https://hexdocs.pm/ash/3.7.6/Ash.Scope.ToOpts.html"><code class="inline">Ash.Scope.ToOpts</code></a> for more.</li><li><code class="inline">:query</code> - A query to seed the action with.</li><li><code class="inline">:not_found_error?</code> (<a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types"><code class="inline">boolean/0</code></a>) - Whether or not to return or raise a <code class="inline">NotFound</code> error or to return <code class="inline">nil</code> when a get? action/interface is called.</li><li><code class="inline">:stream?</code> (<a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types"><code class="inline">boolean/0</code></a>) - If true, a stream of the results will be returned The default value is <code class="inline">false</code>.</li><li><code class="inline">:stream_options</code> (<a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types"><code class="inline">keyword/0</code></a>) - Options passed to <code class="inline">Ash.stream!</code>, if <code class="inline">stream?: true</code> is given<ul><li><code class="inline">:batch_size</code> (<a href="https://hexdocs.pm/elixir/typespecs.html#basic-types"><code class="inline">integer/0</code></a>) - How many records to request in each query run. Defaults to the pagination limits on the resource, or 250.</li><li><code class="inline">:allow_stream_with</code> - The 'worst' strategy allowed to be used to fetch records. See <a href="https://hexdocs.pm/ash/3.7.6/Ash.html#stream!/2"><code class="inline">Ash.stream!/2</code></a> docs for more. The default value is <code class="inline">:keyset</code>.</li><li><code class="inline">:stream_with</code> - The specific strategy to use to fetch records. See <a href="https://hexdocs.pm/ash/3.7.6/Ash.html#stream!/2"><code class="inline">Ash.stream!/2</code></a> docs for more.</li></ul></li></ul>
  </section>
</section>
<section class="detail" id="update_statistics/3">

    <span id="update_statistics/1"></span>

    <span id="update_statistics/2"></span>

  <div class="detail-header">
    <a href="#update_statistics/3" class="detail-link" data-no-tooltip="" aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">update_statistics(record, params \\ nil, opts \\ nil)</h1>


    </div>
  </div>

  <section class="docstring">

<p>Calls the update_statistics action on EhsEnforcement.Enforcement.Offender.</p><h1>Inputs</h1><ul><li>fine_amount</li></ul><h2 id="update_statistics/3-options" class="section-heading"><a href="#update_statistics/3-options" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Options</span></h2><ul><li><code class="inline">:params</code> (<a href="https://hexdocs.pm/elixir/typespecs.html#basic-types"><code class="inline">map/0</code></a>) - Parameters to supply, ignored if the input is a changeset, only used when an identifier is given.</li><li><code class="inline">:atomic_upgrade?</code> (<a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types"><code class="inline">boolean/0</code></a>) - If true the action will be done atomically if it can (and is configured to do so), ignoring the in memory transformations and validations. You should not generally need to disable this. The default value is <code class="inline">true</code>.</li><li><code class="inline">:timeout</code> (<a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types"><code class="inline">timeout/0</code></a>) - A positive integer, or <code class="inline">:infinity</code>. If none is provided, the timeout configured on the domain is used.</li><li><code class="inline">:tracer</code> (one or a list of module that adopts <a href="https://hexdocs.pm/ash/3.7.6/Ash.Tracer.html"><code class="inline">Ash.Tracer</code></a>) - A tracer that implements the <a href="https://hexdocs.pm/ash/3.7.6/Ash.Tracer.html"><code class="inline">Ash.Tracer</code></a> behaviour. See that module for more.</li><li><code class="inline">:action</code> (<a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types"><code class="inline">term/0</code></a>) - The action to use, either an Action struct or the name of the action</li><li><code class="inline">:authorize?</code> - If an actor option is provided (even if it is <code class="inline">nil</code>), authorization happens automatically. If not, this flag can be used to authorize with no user.</li><li><code class="inline">:context</code> (<a href="https://hexdocs.pm/elixir/typespecs.html#basic-types"><code class="inline">map/0</code></a>) - Context to set on the query, changeset, or input</li><li><code class="inline">:tenant</code> (value that implements the <a href="https://hexdocs.pm/ash/3.7.6/Ash.ToTenant.html"><code class="inline">Ash.ToTenant</code></a> protocol) - A tenant to set on the query or changeset</li><li><code class="inline">:actor</code> (<a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types"><code class="inline">term/0</code></a>) - If an actor is provided, it will be used in conjunction with the authorizers of a resource to authorize access</li><li><code class="inline">:scope</code> (<a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types"><code class="inline">term/0</code></a>) - A value that implements the <a href="https://hexdocs.pm/ash/3.7.6/Ash.Scope.ToOpts.html"><code class="inline">Ash.Scope.ToOpts</code></a> protocol, for passing around actor/tenant/context in a single value. See <a href="https://hexdocs.pm/ash/3.7.6/Ash.Scope.ToOpts.html"><code class="inline">Ash.Scope.ToOpts</code></a> for more.</li><li><code class="inline">:return_notifications?</code> (<a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types"><code class="inline">boolean/0</code></a>) - Use this if you're running ash actions in your own transaction and you want to manually handle sending notifications.<br/>If a transaction is ongoing, and this is false, notifications will be discarded, otherwise
the return value is <code class="inline">{:ok, result, notifications}</code> (or <code class="inline">{:ok, notifications}</code>)<br/>To send notifications later, use <code class="inline">Ash.Notifier.notify(notifications)</code>. It sends any notifications
that can be sent, and returns the rest. The default value is <code class="inline">false</code>.</li><li><code class="inline">:rollback_on_error?</code> (<a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types"><code class="inline">boolean/0</code></a>) - Whether or not to rollback the transaction on error, if the resource is in a transaction.<br/>If the action has <code class="inline">transaction? false</code> this option has no effect. If an error is returned from the
data layer and the resource is in a transaction, the transaction is always rolled back, regardless. The default value is <code class="inline">true</code>.</li><li><code class="inline">:notification_metadata</code> (<a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types"><code class="inline">term/0</code></a>) - Metadata to be merged into the metadata field for all notifications sent from this operation. The default value is <code class="inline">%{}</code>.</li><li><code class="inline">:skip_unknown_inputs</code> - A list of inputs that, if provided, will be ignored if they are not recognized by the action. Use <code class="inline">:*</code> to indicate all unknown keys.</li><li><code class="inline">:load</code> (<a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types"><code class="inline">term/0</code></a>) - A load statement to add onto the changeset</li><li><code class="inline">:bulk_options</code> (<a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types"><code class="inline">keyword/0</code></a>) - Options passed to <code class="inline">Ash.bulk_update</code>, if a query, list, or stream of inputs is provided.<ul><li><code class="inline">:atomic_update</code> (<a href="https://hexdocs.pm/elixir/typespecs.html#basic-types"><code class="inline">map/0</code></a>) - A map of atomic updates to apply. See <a href="https://hexdocs.pm/ash/3.7.6/Ash.Changeset.html#atomic_update/3"><code class="inline">Ash.Changeset.atomic_update/3</code></a> for more.</li><li><code class="inline">:stream_batch_size</code> (<a href="https://hexdocs.pm/elixir/typespecs.html#basic-types"><code class="inline">integer/0</code></a>) - Batch size to use if provided a query and the query must be streamed</li><li><code class="inline">:allow_stream_with</code> - The 'worst' strategy allowed to be used to fetch records if the <code class="inline">:stream</code> strategy is chosen. See the <a href="https://hexdocs.pm/ash/3.7.6/Ash.html#stream!/2"><code class="inline">Ash.stream!/2</code></a> docs for more. The default value is <code class="inline">:keyset</code>.</li><li><code class="inline">:authorize_query?</code> (<a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types"><code class="inline">boolean/0</code></a>) - If a query is given, determines whether or not authorization is run on that query. The default value is <code class="inline">true</code>.</li><li><code class="inline">:select</code> (list of <a href="https://hexdocs.pm/elixir/typespecs.html#basic-types"><code class="inline">atom/0</code></a>) - A select statement to apply to records. Ignored if <code class="inline">return_records?</code> is not true.</li><li><code class="inline">:filter</code> (<a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types"><code class="inline">term/0</code></a>) - A filter to apply to records. This is also applied to a stream of inputs.</li><li><code class="inline">:strategy</code> - The strategy or strategies to enable. :stream is used in all cases if the data layer does not support atomics. The default value is <code class="inline">[:atomic]</code>.</li><li><code class="inline">:allow_stream_with</code> - The 'worst' strategy allowed to be used to fetch records. See <a href="https://hexdocs.pm/ash/3.7.6/Ash.html#stream!/2"><code class="inline">Ash.stream!/2</code></a> docs for more. The default value is <code class="inline">:keyset</code>.</li><li><code class="inline">:stream_with</code> - The specific strategy to use to fetch records. See <a href="https://hexdocs.pm/ash/3.7.6/Ash.html#stream!/2"><code class="inline">Ash.stream!/2</code></a> docs for more.</li><li><code class="inline">:max_concurrency</code> (<a href="https://hexdocs.pm/elixir/typespecs.html#basic-types"><code class="inline">non_neg_integer/0</code></a>) - The maximum number of processes allowed to be started for parallel loading of relationships and calculations. Defaults to <code class="inline">System.schedulers_online() * 2</code></li><li><code class="inline">:lock</code> (<a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types"><code class="inline">term/0</code></a>) - A lock statement to add onto the query</li><li><code class="inline">:return_query?</code> (<a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types"><code class="inline">boolean/0</code></a>) - If <code class="inline">true</code>, the query that was ultimately used is returned as a third tuple element.
The query goes through many potential changes during a request, potentially adding
authorization filters, or replacing relationships for other data layers with their
corresponding ids. This option can be used to get the true query that was sent to
the data layer.
The default value is <code class="inline">false</code>.</li><li><code class="inline">:reuse_values?</code> (<a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types"><code class="inline">boolean/0</code></a>) - Whether calculations are allowed to reuse values that have already been loaded, or must refetch them from the data layer. The default value is <code class="inline">false</code>.</li><li><code class="inline">:strict?</code> (<a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types"><code class="inline">boolean/0</code></a>) - If set to true, only specified attributes will be loaded when passing
  a list of fields to fetch on a relationship, which allows for more
  optimized data-fetching.
  See <a href="https://hexdocs.pm/ash/3.7.6/Ash.Query.html#load/2"><code class="inline">Ash.Query.load/2</code></a>.
The default value is <code class="inline">false</code>.</li><li><code class="inline">:authorize_with</code> - If set to <code class="inline">:error</code>, instead of applying authorization filters as a filter, any records not matching the authorization filter will cause an error to be returned. The default value is <code class="inline">:filter</code>.</li><li><code class="inline">:read_action</code> (<a href="https://hexdocs.pm/elixir/typespecs.html#basic-types"><code class="inline">atom/0</code></a>) - The action to use when building the read query.</li><li><code class="inline">:assume_casted?</code> (<a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types"><code class="inline">boolean/0</code></a>) - Whether or not to cast attributes and arguments as input. This is an optimization for cases where the input is already casted and/or not in need of casting The default value is <code class="inline">false</code>.</li><li><code class="inline">:select</code> (list of <a href="https://hexdocs.pm/elixir/typespecs.html#basic-types"><code class="inline">atom/0</code></a>) - A select statement to apply to records. Ignored if <code class="inline">return_records?</code> is not true.</li><li><code class="inline">:authorize_query_with</code> - If set to <code class="inline">:error</code>, instead of filtering unauthorized query results, unauthorized query results will raise an appropriate forbidden error. Uses <code class="inline">authorize_with</code> if not set.</li><li><code class="inline">:authorize_changeset_with</code> - If set to <code class="inline">:error</code>, instead of filtering unauthorized changes, unauthorized changes will raise an appropriate forbidden error. Uses <code class="inline">authorize_with</code> if not set.</li><li><code class="inline">:authorize_with</code> - If set to <code class="inline">:error</code>, instead of filtering unauthorized query results, unauthorized query results will raise an appropriate forbidden error. The default value is <code class="inline">:filter</code>.</li><li><code class="inline">:private_arguments</code> (<a href="https://hexdocs.pm/elixir/typespecs.html#basic-types"><code class="inline">map/0</code></a>) - Private argument values to set on each changeset before validations and changes are run. The default value is <code class="inline">%{}</code>.</li><li><code class="inline">:sorted?</code> (<a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types"><code class="inline">boolean/0</code></a>) - Whether or not to sort results by their input position, in cases where <code class="inline">return_records?: true</code> was provided. The default value is <code class="inline">false</code>.</li><li><code class="inline">:return_records?</code> (<a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types"><code class="inline">boolean/0</code></a>) - Whether or not to return all of the records that were inserted. Defaults to false to account for large inserts. The default value is <code class="inline">false</code>.</li><li><code class="inline">:return_errors?</code> (<a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types"><code class="inline">boolean/0</code></a>) - Whether to return all errors that occur during the operation. Defaults to the value of <code class="inline">:bulk_actions_default_to_errors?</code> in your config, or <code class="inline">false</code> if not set. Returning all errors may be expensive for large inserts. The default value is <code class="inline">false</code>.</li><li><code class="inline">:batch_size</code> (<a href="https://hexdocs.pm/elixir/typespecs.html#basic-types"><code class="inline">pos_integer/0</code></a>) - The number of records to include in each batch. Defaults to the <code class="inline">default_limit</code>
or <code class="inline">max_page_size</code> of the action, or 100.</li><li><code class="inline">:return_stream?</code> (<a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types"><code class="inline">boolean/0</code></a>) - If set to <code class="inline">true</code>, instead of an <a href="https://hexdocs.pm/ash/3.7.6/Ash.BulkResult.html"><code class="inline">Ash.BulkResult</code></a>, a mixed stream is returned.
Potential elements:
<code class="inline">{:notification, notification}</code> - if <code class="inline">return_notifications?</code> is set to <code class="inline">true</code>
<code class="inline">{:ok, record}</code> - if <code class="inline">return_records?</code> is set to <code class="inline">true</code>
<code class="inline">{:error, error}</code> - an error that occurred. May be changeset or an individual error.
The default value is <code class="inline">false</code>.</li><li><code class="inline">:return_nothing?</code> (<a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types"><code class="inline">boolean/0</code></a>) - Mutes warnings about returning nothing.
Only relevant if <code class="inline">return_stream?</code> is set to <code class="inline">true</code> and all other
<code class="inline">return_*?</code> options are set to <code class="inline">false</code>.
The default value is <code class="inline">false</code>.</li><li><code class="inline">:stop_on_error?</code> (<a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types"><code class="inline">boolean/0</code></a>) - If true, the first encountered error will stop the action and be returned. Otherwise, errors
will be skipped. The default value is <code class="inline">false</code>.</li><li><code class="inline">:notify?</code> (<a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types"><code class="inline">boolean/0</code></a>) - Whether or not to generate any notifications. If this is set to <code class="inline">true</code> then the data layer must return
the results from each batch. This may be intensive for large bulk actions.
Notifications will be automatically sent unless <code class="inline">return_notifications?</code> is set to <code class="inline">true</code>.
The default value is <code class="inline">false</code>.</li><li><code class="inline">:transaction</code> - Whether or not to wrap the entire execution in a transaction, each batch, or not at all.
Keep in mind:
<code class="inline">before_transaction</code> and <code class="inline">after_transaction</code> hooks attached to changesets will have to be run
<em>inside</em> the transaction if you choose <code class="inline">transaction: :all</code>.
The default value is <code class="inline">:batch</code>.</li><li><code class="inline">:max_concurrency</code> (<a href="https://hexdocs.pm/elixir/typespecs.html#basic-types"><code class="inline">non_neg_integer/0</code></a>) - If set to a value greater than 0, up to that many tasks will be started to run batches asynchronously The default value is <code class="inline">0</code>.</li></ul></li><li><code class="inline">:private_arguments</code> (<a href="https://hexdocs.pm/elixir/typespecs.html#basic-types"><code class="inline">map/0</code></a>) - Private argument values to set before validations and changes. The default value is <code class="inline">%{}</code>.</li></ul>
  </section>
</section>
<section class="detail" id="update_statistics!/3">

    <span id="update_statistics!/1"></span>

    <span id="update_statistics!/2"></span>

  <div class="detail-header">
    <a href="#update_statistics!/3" class="detail-link" data-no-tooltip="" aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">update_statistics!(record, params \\ nil, opts \\ nil)</h1>


    </div>
  </div>

  <section class="docstring">

<p>Calls the update_statistics action on EhsEnforcement.Enforcement.Offender.
Raises any errors instead of returning them</p><h1>Inputs</h1><ul><li>fine_amount</li></ul><h2 id="update_statistics!/3-options" class="section-heading"><a href="#update_statistics!/3-options" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Options</span></h2><ul><li><code class="inline">:params</code> (<a href="https://hexdocs.pm/elixir/typespecs.html#basic-types"><code class="inline">map/0</code></a>) - Parameters to supply, ignored if the input is a changeset, only used when an identifier is given.</li><li><code class="inline">:atomic_upgrade?</code> (<a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types"><code class="inline">boolean/0</code></a>) - If true the action will be done atomically if it can (and is configured to do so), ignoring the in memory transformations and validations. You should not generally need to disable this. The default value is <code class="inline">true</code>.</li><li><code class="inline">:timeout</code> (<a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types"><code class="inline">timeout/0</code></a>) - A positive integer, or <code class="inline">:infinity</code>. If none is provided, the timeout configured on the domain is used.</li><li><code class="inline">:tracer</code> (one or a list of module that adopts <a href="https://hexdocs.pm/ash/3.7.6/Ash.Tracer.html"><code class="inline">Ash.Tracer</code></a>) - A tracer that implements the <a href="https://hexdocs.pm/ash/3.7.6/Ash.Tracer.html"><code class="inline">Ash.Tracer</code></a> behaviour. See that module for more.</li><li><code class="inline">:action</code> (<a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types"><code class="inline">term/0</code></a>) - The action to use, either an Action struct or the name of the action</li><li><code class="inline">:authorize?</code> - If an actor option is provided (even if it is <code class="inline">nil</code>), authorization happens automatically. If not, this flag can be used to authorize with no user.</li><li><code class="inline">:context</code> (<a href="https://hexdocs.pm/elixir/typespecs.html#basic-types"><code class="inline">map/0</code></a>) - Context to set on the query, changeset, or input</li><li><code class="inline">:tenant</code> (value that implements the <a href="https://hexdocs.pm/ash/3.7.6/Ash.ToTenant.html"><code class="inline">Ash.ToTenant</code></a> protocol) - A tenant to set on the query or changeset</li><li><code class="inline">:actor</code> (<a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types"><code class="inline">term/0</code></a>) - If an actor is provided, it will be used in conjunction with the authorizers of a resource to authorize access</li><li><code class="inline">:scope</code> (<a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types"><code class="inline">term/0</code></a>) - A value that implements the <a href="https://hexdocs.pm/ash/3.7.6/Ash.Scope.ToOpts.html"><code class="inline">Ash.Scope.ToOpts</code></a> protocol, for passing around actor/tenant/context in a single value. See <a href="https://hexdocs.pm/ash/3.7.6/Ash.Scope.ToOpts.html"><code class="inline">Ash.Scope.ToOpts</code></a> for more.</li><li><code class="inline">:return_notifications?</code> (<a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types"><code class="inline">boolean/0</code></a>) - Use this if you're running ash actions in your own transaction and you want to manually handle sending notifications.<br/>If a transaction is ongoing, and this is false, notifications will be discarded, otherwise
the return value is <code class="inline">{:ok, result, notifications}</code> (or <code class="inline">{:ok, notifications}</code>)<br/>To send notifications later, use <code class="inline">Ash.Notifier.notify(notifications)</code>. It sends any notifications
that can be sent, and returns the rest. The default value is <code class="inline">false</code>.</li><li><code class="inline">:rollback_on_error?</code> (<a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types"><code class="inline">boolean/0</code></a>) - Whether or not to rollback the transaction on error, if the resource is in a transaction.<br/>If the action has <code class="inline">transaction? false</code> this option has no effect. If an error is returned from the
data layer and the resource is in a transaction, the transaction is always rolled back, regardless. The default value is <code class="inline">true</code>.</li><li><code class="inline">:notification_metadata</code> (<a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types"><code class="inline">term/0</code></a>) - Metadata to be merged into the metadata field for all notifications sent from this operation. The default value is <code class="inline">%{}</code>.</li><li><code class="inline">:skip_unknown_inputs</code> - A list of inputs that, if provided, will be ignored if they are not recognized by the action. Use <code class="inline">:*</code> to indicate all unknown keys.</li><li><code class="inline">:load</code> (<a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types"><code class="inline">term/0</code></a>) - A load statement to add onto the changeset</li><li><code class="inline">:bulk_options</code> (<a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types"><code class="inline">keyword/0</code></a>) - Options passed to <code class="inline">Ash.bulk_update</code>, if a query, list, or stream of inputs is provided.<ul><li><code class="inline">:atomic_update</code> (<a href="https://hexdocs.pm/elixir/typespecs.html#basic-types"><code class="inline">map/0</code></a>) - A map of atomic updates to apply. See <a href="https://hexdocs.pm/ash/3.7.6/Ash.Changeset.html#atomic_update/3"><code class="inline">Ash.Changeset.atomic_update/3</code></a> for more.</li><li><code class="inline">:stream_batch_size</code> (<a href="https://hexdocs.pm/elixir/typespecs.html#basic-types"><code class="inline">integer/0</code></a>) - Batch size to use if provided a query and the query must be streamed</li><li><code class="inline">:allow_stream_with</code> - The 'worst' strategy allowed to be used to fetch records if the <code class="inline">:stream</code> strategy is chosen. See the <a href="https://hexdocs.pm/ash/3.7.6/Ash.html#stream!/2"><code class="inline">Ash.stream!/2</code></a> docs for more. The default value is <code class="inline">:keyset</code>.</li><li><code class="inline">:authorize_query?</code> (<a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types"><code class="inline">boolean/0</code></a>) - If a query is given, determines whether or not authorization is run on that query. The default value is <code class="inline">true</code>.</li><li><code class="inline">:select</code> (list of <a href="https://hexdocs.pm/elixir/typespecs.html#basic-types"><code class="inline">atom/0</code></a>) - A select statement to apply to records. Ignored if <code class="inline">return_records?</code> is not true.</li><li><code class="inline">:filter</code> (<a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types"><code class="inline">term/0</code></a>) - A filter to apply to records. This is also applied to a stream of inputs.</li><li><code class="inline">:strategy</code> - The strategy or strategies to enable. :stream is used in all cases if the data layer does not support atomics. The default value is <code class="inline">[:atomic]</code>.</li><li><code class="inline">:allow_stream_with</code> - The 'worst' strategy allowed to be used to fetch records. See <a href="https://hexdocs.pm/ash/3.7.6/Ash.html#stream!/2"><code class="inline">Ash.stream!/2</code></a> docs for more. The default value is <code class="inline">:keyset</code>.</li><li><code class="inline">:stream_with</code> - The specific strategy to use to fetch records. See <a href="https://hexdocs.pm/ash/3.7.6/Ash.html#stream!/2"><code class="inline">Ash.stream!/2</code></a> docs for more.</li><li><code class="inline">:max_concurrency</code> (<a href="https://hexdocs.pm/elixir/typespecs.html#basic-types"><code class="inline">non_neg_integer/0</code></a>) - The maximum number of processes allowed to be started for parallel loading of relationships and calculations. Defaults to <code class="inline">System.schedulers_online() * 2</code></li><li><code class="inline">:lock</code> (<a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types"><code class="inline">term/0</code></a>) - A lock statement to add onto the query</li><li><code class="inline">:return_query?</code> (<a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types"><code class="inline">boolean/0</code></a>) - If <code class="inline">true</code>, the query that was ultimately used is returned as a third tuple element.
The query goes through many potential changes during a request, potentially adding
authorization filters, or replacing relationships for other data layers with their
corresponding ids. This option can be used to get the true query that was sent to
the data layer.
The default value is <code class="inline">false</code>.</li><li><code class="inline">:reuse_values?</code> (<a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types"><code class="inline">boolean/0</code></a>) - Whether calculations are allowed to reuse values that have already been loaded, or must refetch them from the data layer. The default value is <code class="inline">false</code>.</li><li><code class="inline">:strict?</code> (<a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types"><code class="inline">boolean/0</code></a>) - If set to true, only specified attributes will be loaded when passing
  a list of fields to fetch on a relationship, which allows for more
  optimized data-fetching.
  See <a href="https://hexdocs.pm/ash/3.7.6/Ash.Query.html#load/2"><code class="inline">Ash.Query.load/2</code></a>.
The default value is <code class="inline">false</code>.</li><li><code class="inline">:authorize_with</code> - If set to <code class="inline">:error</code>, instead of applying authorization filters as a filter, any records not matching the authorization filter will cause an error to be returned. The default value is <code class="inline">:filter</code>.</li><li><code class="inline">:read_action</code> (<a href="https://hexdocs.pm/elixir/typespecs.html#basic-types"><code class="inline">atom/0</code></a>) - The action to use when building the read query.</li><li><code class="inline">:assume_casted?</code> (<a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types"><code class="inline">boolean/0</code></a>) - Whether or not to cast attributes and arguments as input. This is an optimization for cases where the input is already casted and/or not in need of casting The default value is <code class="inline">false</code>.</li><li><code class="inline">:select</code> (list of <a href="https://hexdocs.pm/elixir/typespecs.html#basic-types"><code class="inline">atom/0</code></a>) - A select statement to apply to records. Ignored if <code class="inline">return_records?</code> is not true.</li><li><code class="inline">:authorize_query_with</code> - If set to <code class="inline">:error</code>, instead of filtering unauthorized query results, unauthorized query results will raise an appropriate forbidden error. Uses <code class="inline">authorize_with</code> if not set.</li><li><code class="inline">:authorize_changeset_with</code> - If set to <code class="inline">:error</code>, instead of filtering unauthorized changes, unauthorized changes will raise an appropriate forbidden error. Uses <code class="inline">authorize_with</code> if not set.</li><li><code class="inline">:authorize_with</code> - If set to <code class="inline">:error</code>, instead of filtering unauthorized query results, unauthorized query results will raise an appropriate forbidden error. The default value is <code class="inline">:filter</code>.</li><li><code class="inline">:private_arguments</code> (<a href="https://hexdocs.pm/elixir/typespecs.html#basic-types"><code class="inline">map/0</code></a>) - Private argument values to set on each changeset before validations and changes are run. The default value is <code class="inline">%{}</code>.</li><li><code class="inline">:sorted?</code> (<a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types"><code class="inline">boolean/0</code></a>) - Whether or not to sort results by their input position, in cases where <code class="inline">return_records?: true</code> was provided. The default value is <code class="inline">false</code>.</li><li><code class="inline">:return_records?</code> (<a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types"><code class="inline">boolean/0</code></a>) - Whether or not to return all of the records that were inserted. Defaults to false to account for large inserts. The default value is <code class="inline">false</code>.</li><li><code class="inline">:return_errors?</code> (<a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types"><code class="inline">boolean/0</code></a>) - Whether to return all errors that occur during the operation. Defaults to the value of <code class="inline">:bulk_actions_default_to_errors?</code> in your config, or <code class="inline">false</code> if not set. Returning all errors may be expensive for large inserts. The default value is <code class="inline">false</code>.</li><li><code class="inline">:batch_size</code> (<a href="https://hexdocs.pm/elixir/typespecs.html#basic-types"><code class="inline">pos_integer/0</code></a>) - The number of records to include in each batch. Defaults to the <code class="inline">default_limit</code>
or <code class="inline">max_page_size</code> of the action, or 100.</li><li><code class="inline">:return_stream?</code> (<a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types"><code class="inline">boolean/0</code></a>) - If set to <code class="inline">true</code>, instead of an <a href="https://hexdocs.pm/ash/3.7.6/Ash.BulkResult.html"><code class="inline">Ash.BulkResult</code></a>, a mixed stream is returned.
Potential elements:
<code class="inline">{:notification, notification}</code> - if <code class="inline">return_notifications?</code> is set to <code class="inline">true</code>
<code class="inline">{:ok, record}</code> - if <code class="inline">return_records?</code> is set to <code class="inline">true</code>
<code class="inline">{:error, error}</code> - an error that occurred. May be changeset or an individual error.
The default value is <code class="inline">false</code>.</li><li><code class="inline">:return_nothing?</code> (<a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types"><code class="inline">boolean/0</code></a>) - Mutes warnings about returning nothing.
Only relevant if <code class="inline">return_stream?</code> is set to <code class="inline">true</code> and all other
<code class="inline">return_*?</code> options are set to <code class="inline">false</code>.
The default value is <code class="inline">false</code>.</li><li><code class="inline">:stop_on_error?</code> (<a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types"><code class="inline">boolean/0</code></a>) - If true, the first encountered error will stop the action and be returned. Otherwise, errors
will be skipped. The default value is <code class="inline">false</code>.</li><li><code class="inline">:notify?</code> (<a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types"><code class="inline">boolean/0</code></a>) - Whether or not to generate any notifications. If this is set to <code class="inline">true</code> then the data layer must return
the results from each batch. This may be intensive for large bulk actions.
Notifications will be automatically sent unless <code class="inline">return_notifications?</code> is set to <code class="inline">true</code>.
The default value is <code class="inline">false</code>.</li><li><code class="inline">:transaction</code> - Whether or not to wrap the entire execution in a transaction, each batch, or not at all.
Keep in mind:
<code class="inline">before_transaction</code> and <code class="inline">after_transaction</code> hooks attached to changesets will have to be run
<em>inside</em> the transaction if you choose <code class="inline">transaction: :all</code>.
The default value is <code class="inline">:batch</code>.</li><li><code class="inline">:max_concurrency</code> (<a href="https://hexdocs.pm/elixir/typespecs.html#basic-types"><code class="inline">non_neg_integer/0</code></a>) - If set to a value greater than 0, up to that many tasks will be started to run batches asynchronously The default value is <code class="inline">0</code>.</li></ul></li><li><code class="inline">:private_arguments</code> (<a href="https://hexdocs.pm/elixir/typespecs.html#basic-types"><code class="inline">map/0</code></a>) - Private argument values to set before validations and changes. The default value is <code class="inline">%{}</code>.</li></ul>
  </section>
</section>

    </div>
  </section>

    <footer class="footer">
      <p>

        <span class="line">
          <button class="a-main footer-button display-quick-switch" title="Search HexDocs packages">
            Search HexDocs
          </button>

            <a href="ehs_enforcement.epub" title="ePub version">
              Download ePub version
            </a>

        </span>
      </p>

      <p class="built-using">
        Built using
        <a href="https://github.com/elixir-lang/ex_doc" title="ExDoc" target="_blank" rel="help noopener" translate="no">ExDoc</a> (v0.38.2) for the

          <a href="https://elixir-lang.org" title="Elixir" target="_blank" translate="no">Elixir programming language</a>

      </p>

    </footer>
  </div>
</main>
</div>

  </body>
</html>
