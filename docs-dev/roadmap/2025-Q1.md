# Q1 2025 Roadmap (Jan-Mar)

**Quarter Theme**: Foundation & Quick Wins
**Primary Focus**: Risk & Compliance Professionals
**Goal**: Validate product-market fit with 10 beta users

---

## Overview

Q1 2025 is about shipping features that provide **immediate value** to Risk & Compliance professionals while building the foundation for monetization in Q2. We're focusing on:

1. **Quick wins** that unlock existing data (industry filtering, full-text search)
2. **Analytics foundation** for trend analysis and benchmarking
3. **API infrastructure** for programmatic access
4. **Monetization preparation** (subscription tiers, payment integration)

---

## Month 1: Quick Wins (January 2025)

### Week 1-2: Industry/Sector Filtering

**User Story**: *"As a compliance professional in the construction industry, I want to see only enforcement actions against construction companies so I can benchmark our performance against peers."*

**Implementation**:
- Add SIC code dropdown filter to Cases/Notices LiveView
- Add EA sector multi-select filter (Waste Management, Water, etc.)
- Update URL query parameters for shareable filtered views
- Add filter chips/tags to show active filters
- Pre-compute industry statistics for dashboard

**Technical Tasks**:
- [ ] Create `FilterComponent` LiveView component
- [ ] Add SIC code lookup data (standard UK SIC 2007 codes)
- [ ] Update `CaseLive.Index` with industry filter params
- [ ] Add industry filter to `Ash.Query` composition
- [ ] Create industry statistics Ash calculation
- [ ] Write tests for filtering logic

**Success Criteria**:
- Users can filter by SIC code (dropdown with search)
- Users can filter by EA sector (multi-select checkboxes)
- Filters persist in URL for sharing
- Filter counts shown in UI ("23 cases match your filters")
- **Completion Target**: January 13, 2025

---

### Week 2-3: Full-Text Search UI

**User Story**: *"As a compliance professional, I want to search for all cases involving 'fall from height' so I can understand the enforcement patterns around this specific hazard."*

**Implementation**:
- Add search bar to Cases/Notices pages
- Activate existing pg_trgm PostgreSQL indexes
- Search across: offender names, case descriptions, breach text, legislation titles
- Highlight matching text in results
- Add search suggestions/autocomplete

**Technical Tasks**:
- [ ] Create `SearchBarComponent` LiveView component
- [ ] Add full-text search action to `Case` Ash resource (`read :search`)
- [ ] Implement pg_trgm search in Ash custom expression
- [ ] Add debounced search (300ms delay) via LiveView JS hooks
- [ ] Add search result highlighting (mark matching terms)
- [ ] Add "Did you mean?" suggestions for typos
- [ ] Write tests for search accuracy

**Success Criteria**:
- Search bar visible on all list views
- Results update in real-time as user types (debounced)
- Relevant results ranked by similarity score
- Matching text highlighted in results
- Search works across multiple fields simultaneously
- **Completion Target**: January 20, 2025

---

### Week 3-4: Saved Searches

**User Story**: *"As a compliance professional who monitors the same companies every week, I want to save my filter combinations so I don't have to re-enter them each time."*

**Implementation**:
- Add "Save this search" button on filtered views
- Store saved searches in user preferences
- Show saved searches in sidebar/dropdown
- Allow renaming and deleting saved searches
- Badge showing result count for each saved search

**Technical Tasks**:
- [ ] Create `SavedSearch` Ash resource (belongs to User)
- [ ] Add saved search CRUD actions to User resource
- [ ] Create `SavedSearchComponent` for sidebar
- [ ] Implement search JSON serialization (filter params → JSON)
- [ ] Add "Load saved search" dropdown in header
- [ ] Show result counts via Ash aggregate (badge next to search name)
- [ ] Write tests for saved search persistence

**Success Criteria**:
- Users can save current filter combination with custom name
- Saved searches appear in sidebar with result counts
- Clicking saved search applies filters instantly
- Users can rename/delete saved searches
- Saved searches persist across sessions
- **Completion Target**: January 27, 2025

---

### Week 4: API Authentication Infrastructure

**User Story**: *"As a developer integrating enforcement data into our compliance system, I need an API key to authenticate programmatic access."*

**Implementation**:
- Add API key generation to user settings
- Create `ApiKey` Ash resource with token generation
- Implement Bearer token authentication for JSON:API
- Add rate limiting per API key (via Ash Rate Limiter)
- Create API documentation page

**Technical Tasks**:
- [ ] Create `ApiKey` Ash resource (belongs to User, has token hash)
- [ ] Add secure token generation (Phoenix.Token or :crypto.strong_rand_bytes)
- [ ] Implement `AshAuthentication.Strategy.ApiKey` (custom strategy)
- [ ] Add API key management UI in user settings
- [ ] Configure Ash Rate Limiter (1,000 requests/day for Free tier)
- [ ] Create `/api/v1` namespace for JSON:API endpoints
- [ ] Write API authentication tests

**Success Criteria**:
- Users can generate/revoke API keys
- API requests authenticated via `Authorization: Bearer <token>` header
- Rate limiting enforced (return 429 Too Many Requests)
- API key usage tracked (request count)
- **Completion Target**: January 31, 2025

---

## Month 2: Analytics Foundation (February 2025)

### Week 5-6: Time-Series Trend Analysis

**User Story**: *"As a risk manager, I want to see if HSE prosecutions are increasing or decreasing over time so I can assess industry-wide risk trends."*

**Implementation**:
- Add trend charts to dashboard (line charts, bar charts)
- Month-over-month, year-over-year comparisons
- Filterable by agency, industry, legislation
- Export chart data as CSV
- Integrate ApexCharts.js via LiveView hook

**Technical Tasks**:
- [ ] Create `Metrics.TimeSeries` Ash calculation
- [ ] Add `npm install apexcharts` to assets
- [ ] Create `ChartComponent` LiveView component with ApexCharts hook
- [ ] Implement monthly/quarterly/yearly aggregation queries
- [ ] Add chart interactivity (zoom, pan, tooltip)
- [ ] Create trend analysis dashboard page (`/analytics/trends`)
- [ ] Write tests for time-series calculations

**Success Criteria**:
- Line charts showing cases/notices over time
- Month-over-month percentage change displayed
- Charts filterable by agency, industry
- Charts responsive (work on mobile)
- **Completion Target**: February 10, 2025

---

### Week 6-7: Legislation Breakdown Analysis

**User Story**: *"As a compliance professional, I want to see which regulations are most frequently violated so I can prioritize our compliance efforts."*

**Implementation**:
- Top 20 most violated regulations (bar chart)
- Breakdown by agency, industry
- Trend over time (is this regulation being enforced more/less?)
- Link to all cases for specific regulation
- Average fine per regulation

**Technical Tasks**:
- [ ] Create `Legislation.ViolationStats` Ash calculation
- [ ] Add legislation frequency aggregation query
- [ ] Create legislation breakdown page (`/analytics/legislation`)
- [ ] Add horizontal bar chart component (ApexCharts)
- [ ] Link from chart bars to filtered case list
- [ ] Add average fine calculation per legislation
- [ ] Write tests for legislation statistics

**Success Criteria**:
- Bar chart showing top 20 regulations
- Clickable bars link to case list
- Average fine shown next to regulation name
- Filterable by date range, agency
- **Completion Target**: February 17, 2025

---

### Week 7-8: Geographic Analysis

**User Story**: *"As a regional compliance manager, I want to see enforcement hotspots by location so I can understand regional risk variations."*

**Implementation**:
- Heat map of enforcement actions by postcode/region
- Table view of cases by local authority
- Filter dashboard by geographic region
- Export geographic data for mapping tools

**Technical Tasks**:
- [ ] Add postcode → region mapping (UK postcode areas)
- [ ] Create `GeoStats` Ash calculation (group by region/local authority)
- [ ] Add region filter dropdown to all pages
- [ ] Create geographic analysis page (`/analytics/geography`)
- [ ] Integrate Mapbox or Leaflet.js for heat map visualization
- [ ] Add table view (sortable by case count, fine total)
- [ ] Write tests for geographic aggregations

**Success Criteria**:
- Heat map showing enforcement density by region
- Table of top 20 local authorities by case count
- Clickable regions link to filtered case list
- Export geographic data as CSV
- **Completion Target**: February 24, 2025

---

## Month 3: API & Monetization (March 2025)

### Week 9-10: Expose JSON:API Endpoints

**User Story**: *"As a developer, I need a RESTful API to fetch case data programmatically and integrate it into our internal dashboards."*

**Implementation**:
- Expose `/api/v1/cases`, `/api/v1/notices`, `/api/v1/offenders`
- Implement pagination, filtering, sorting per JSON:API spec
- Add API documentation page (Swagger/OpenAPI)
- Enable CORS for browser-based clients
- Add API request/response logging

**Technical Tasks**:
- [ ] Configure `AshJsonApi` routes in router
- [ ] Add JSON:API index/show actions to Case, Notice, Offender resources
- [ ] Implement `sparse_fieldsets` support (select specific fields)
- [ ] Add `include` support (side-load related data)
- [ ] Generate OpenAPI spec from Ash resources (via `ash_json_api_wrapper`)
- [ ] Create `/docs/api` page with SwaggerUI
- [ ] Write API integration tests

**Success Criteria**:
- GET `/api/v1/cases` returns paginated case list (JSON:API format)
- Filtering works via query params (`?filter[agency]=hse`)
- Sorting works via query param (`?sort=-offence_action_date`)
- Relationships loadable via `?include=offender,agency`
- API documented at `/docs/api` with interactive examples
- **Completion Target**: March 10, 2025

---

### Week 10-11: Rate Limiting & Usage Tracking

**User Story**: *"As the platform owner, I need to enforce API rate limits per tier to prevent abuse and ensure fair usage."*

**Implementation**:
- Rate limiting via Ash Rate Limiter (already installed)
- Track API usage per user/API key
- Display usage in user dashboard ("782 / 1,000 requests this month")
- Send email alert at 80% and 100% quota
- Return 429 with `Retry-After` header when rate limited

**Technical Tasks**:
- [ ] Create `ApiUsage` Ash resource (tracks requests per API key)
- [ ] Implement rate limit action (`check_rate_limit` before JSON:API read)
- [ ] Add rate limit configuration per tier (Free: 1K, Pro: 10K, etc.)
- [ ] Create usage tracking dashboard component
- [ ] Add email alerts for quota warnings (via Swoosh)
- [ ] Write rate limiting tests (ensure 429 returned correctly)

**Success Criteria**:
- Rate limits enforced (1,000 req/month for Free tier)
- 429 response includes `Retry-After` header
- Users see real-time usage in dashboard
- Email alerts sent at 80% and 100% quota
- **Completion Target**: March 17, 2025

---

### Week 11-12: Subscription Tiers & Payment Integration

**User Story**: *"As a compliance professional who finds value in the platform, I want to upgrade to a paid tier to access advanced features and higher API limits."*

**Implementation**:
- Design Free/Professional/Business/Enterprise tiers
- Stripe integration for payment processing
- Subscription management (upgrade/downgrade/cancel)
- Feature flags based on tier (e.g., hide custom reports for Free)
- Invoice generation and email delivery

**Technical Tasks**:
- [ ] Create `Subscription` Ash resource (belongs to User, has tier and status)
- [ ] Integrate Stripe SDK (`stripity_stripe` library)
- [ ] Create checkout flow (LiveView with Stripe Elements)
- [ ] Implement webhook handlers for Stripe events (payment success, cancellation)
- [ ] Add feature flag system (`can_access_feature?(:custom_reports, user)`)
- [ ] Create billing page (`/billing`) for subscription management
- [ ] Write subscription flow tests (E2E with Stripe test mode)

**Success Criteria**:
- Users can upgrade to Professional tier (£49/month)
- Payment processed via Stripe (test mode)
- Features gated by subscription tier
- Users can view/download invoices
- Subscription cancellation works correctly
- **Completion Target**: March 24, 2025

---

### Week 12: Custom Report Builder (MVP)

**User Story**: *"As a compliance manager, I want to create custom reports with my saved filters and schedule them to be emailed weekly."*

**Implementation**:
- UI to select filters and create "report template"
- Schedule options (daily, weekly, monthly)
- Email delivery of CSV/Excel reports
- Background job via AshOban to generate and send

**Technical Tasks**:
- [ ] Create `ReportTemplate` Ash resource (belongs to User, has filter JSON)
- [ ] Create `ScheduledReport` Ash resource (has cron schedule)
- [ ] Add report builder UI (`/reports/new`)
- [ ] Implement AshOban worker for report generation
- [ ] Add CSV/Excel export with applied filters
- [ ] Integrate email delivery via Swoosh
- [ ] Write tests for scheduled report generation

**Success Criteria**:
- Users can create report templates with custom filters
- Reports scheduled (cron syntax: `0 9 * * 1` = 9am every Monday)
- Reports emailed as CSV/Excel attachments
- Background job handles failures gracefully (retry logic)
- **Completion Target**: March 31, 2025

---

## Q1 Success Metrics

### Product Metrics
- [ ] **10 beta users** actively using the platform
- [ ] **1,000+ API requests** per month
- [ ] **100+ searches** performed per week
- [ ] **20+ saved searches** created by users
- [ ] **5+ custom reports** scheduled

### User Satisfaction
- [ ] **NPS score of 40+** (based on 10 user surveys)
- [ ] **3+ positive testimonials** for marketing site
- [ ] **Zero critical bugs** in production

### Technical Quality
- [ ] **80%+ test coverage** (currently ~65%)
- [ ] **95%+ uptime** (measure via Phoenix LiveDashboard)
- [ ] **API p95 response time < 500ms**
- [ ] **Zero data quality issues** (duplicate cases, missing data)

### Business Metrics
- [ ] **Pricing tiers designed** and documented
- [ ] **Stripe integration tested** (test mode)
- [ ] **10 users interested in paid tier** (waitlist signups)
- [ ] **Revenue projections modeled** (Q2-Q4 2025)

---

## Risks & Mitigations

### Risk: Users don't find value in industry filtering
**Mitigation**: Conduct 5 user interviews in Week 2 to validate use case
**Contingency**: Pivot to alternative filters (geographic, legislation type)

### Risk: Stripe integration takes longer than 1 week
**Mitigation**: Start Stripe integration in parallel with Week 11 tasks
**Contingency**: Delay paid tier launch to Q2, focus on beta feedback

### Risk: API usage is too low to validate product-market fit
**Mitigation**: Actively recruit API users (post in /r/legaltech, compliance forums)
**Contingency**: Focus on UI-based users instead, defer API monetization to Q2

### Risk: Time-series calculations slow down dashboard
**Mitigation**: Pre-compute metrics via AshOban background jobs
**Contingency**: Add caching layer (ETS or Redis) for expensive queries

---

## Dependencies

### External Services
- **Stripe** (payment processing) - account setup required
- **Postmark/SendGrid** (transactional emails) - already have Swoosh configured
- **ApexCharts CDN** (charting library) - no account needed

### Infrastructure
- **PostgreSQL extensions**: pg_trgm (already enabled), pgvector (future)
- **Background jobs**: AshOban (already configured)
- **CI/CD**: GitHub Actions (already configured)

### Design Assets
- **Marketing site copy** for pricing tiers (Week 11)
- **API documentation** content (Week 9)
- **Email templates** for reports and notifications (Week 12)

---

## Team Capacity

**Assumptions**:
- 1 full-time developer (you)
- 40 hours/week focused development time
- ~160 hours total per month
- Estimated 480 hours available for Q1

**Task Breakdown**:
- Month 1 (Quick Wins): ~120 hours (30 hours/feature × 4 features)
- Month 2 (Analytics): ~140 hours (45 hours/feature × 3 features)
- Month 3 (API & Monetization): ~160 hours (40 hours/feature × 4 features)
- Buffer: ~60 hours (for bug fixes, unexpected complexity)

**Total**: 480 hours (exact match to capacity)

---

## Post-Q1: Handoff to Q2

**Deliverables to Q2**:
- **Working paid tiers** (even if no paying customers yet)
- **API in production** with authentication and rate limiting
- **10 beta users** providing feedback on roadmap priorities
- **Analytics foundation** for trend analysis and benchmarking

**Q2 Preview** (Legal Professional Features):
- Similar case finder (semantic search)
- Document storage (PDFs for notices)
- Timeline visualization (offender enforcement history)
- Precedent analysis (fine ranges by breach type)
- Launch paid marketing (target 50 paying customers)

---

## Related Documents

- [Strategic Roadmap](../ROADMAP.md)
- [User Segments Analysis](user-segments.md)
- [Prioritization Framework](prioritization-framework.md)
- [Industry Filtering Implementation Plan](../plans/industry-filtering.md)
- [Full-Text Search Implementation Plan](../plans/full-text-search.md)
- [API Strategy](../plans/api-strategy.md)

---

**Created**: January 7, 2025
**Owner**: Development Team
**Review Date**: April 1, 2025 (Q2 Planning)
